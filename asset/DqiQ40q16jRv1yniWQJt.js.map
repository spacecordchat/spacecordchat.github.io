{"version":3,"file":"DqiQ40q16jRv1yniWQJt.js","sources":["../../src/components/modals/BanMemberModal.tsx"],"sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Routes } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport * as yup from \"yup\";\nimport { ModalProps, modalController } from \"../../controllers/modals\";\nimport { useAppStore } from \"../../hooks/useAppStore\";\nimport { Modal } from \"./ModalComponents\";\n\nconst DescriptionText = styled.p`\n\tfont-size: 16px;\n\tfont-weight: var(--font-weight-regular);\n\tcolor: var(--text-header-secondary);\n\tmargin-top: 8px;\n`;\n\nconst TextArea = styled.textarea`\n\tflex: 1;\n\tpadding: 8px;\n\tborder-radius: 4px;\n\tbackground-color: var(--background-secondary-alt);\n\tborder: none;\n\tcolor: var(--text);\n\tfont-size: 16px;\n\tfont-weight: var(--font-weight-regular);\n\tresize: none;\n\toutline: none;\n`;\n\nconst schema = yup\n\t.object({\n\t\treason: yup.string().max(512, \"Reason must be less than 512 characters\"),\n\t})\n\t.required();\n\nexport function BanMemberModal({ target, type, ...props }: ModalProps<\"ban_member\">) {\n\tconst app = useAppStore();\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tformState: { disabled, isLoading, isSubmitting },\n\t} = useForm({\n\t\tresolver: yupResolver(schema),\n\t});\n\n\tconst isDisabled = disabled || isLoading || isSubmitting;\n\n\tconst onSubmit = handleSubmit((data) => {\n\t\tapp.rest\n\t\t\t.put(\n\t\t\t\tRoutes.guildBan(target.guild.id, target.user!.id),\n\t\t\t\tundefined,\n\t\t\t\tundefined,\n\t\t\t\tdata.reason\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t\"X-Audit-Log-Reason\": data.reason,\n\t\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\t)\n\t\t\t.then(() => {\n\t\t\t\tmodalController.pop(\"close\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\t});\n\n\treturn (\n\t\t<Modal\n\t\t\t{...props}\n\t\t\ttitle={`Ban '${target.user?.username}'`}\n\t\t\tdescription={\n\t\t\t\t<DescriptionText>\n\t\t\t\t\tAre you sure you want to ban <b>@{target.user?.username}</b>? They won't be able to rejoin unless\n\t\t\t\t\tthey are unbanned.\n\t\t\t\t</DescriptionText>\n\t\t\t}\n\t\t\tactions={[\n\t\t\t\t{\n\t\t\t\t\tonClick: onSubmit,\n\t\t\t\t\tchildren: <span>Ban</span>,\n\t\t\t\t\tpalette: \"danger\",\n\t\t\t\t\tconfirmation: true,\n\t\t\t\t\tdisabled: isDisabled,\n\t\t\t\t\tsize: \"small\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tonClick: () => modalController.pop(\"close\"),\n\t\t\t\t\tchildren: <span>Cancel</span>,\n\t\t\t\t\tpalette: \"link\",\n\t\t\t\t\tdisabled: isDisabled,\n\t\t\t\t\tsize: \"small\",\n\t\t\t\t},\n\t\t\t]}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc=\"https://media1.tenor.com/m/TG5OF7UkLasAAAAd/thanos-infinity.gif\"\n\t\t\t\tloading=\"lazy\"\n\t\t\t\talt=\"Thanos Snap GIF\"\n\t\t\t\theight={300}\n\t\t\t\tstyle={{\n\t\t\t\t\tmarginBottom: 20,\n\t\t\t\t\tborderRadius: 8,\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t<TextArea {...register(\"reason\")} id=\"reason\" name=\"reason\" placeholder=\"Reason\" maxLength={512} />\n\t\t</Modal>\n\t);\n}\n"],"names":["DescriptionText","styled","TextArea","schema","yup.object","yup.string","BanMemberModal","target","type","props","app","useAppStore","register","handleSubmit","disabled","isLoading","isSubmitting","useForm","yupResolver","isDisabled","onSubmit","data","Routes","modalController","e","jsxs","Modal","_a","_b","jsx"],"mappings":"yQASA,MAAMA,EAAkBC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAOzBC,EAAWD,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAalBE,EAASC,EACN,CACP,OAAQC,EAAI,EAAS,IAAI,IAAK,yCAAyC,CACxE,CAAC,EACA,SAAS,EAEJ,SAASC,EAAe,CAAE,OAAAC,EAAQ,KAAAC,EAAM,GAAGC,GAAmC,SACpF,MAAMC,EAAMC,EAAY,EAClB,CACL,SAAAC,EACA,aAAAC,EACA,UAAW,CAAE,SAAAC,EAAU,UAAAC,EAAW,aAAAC,CAAa,GAC5CC,EAAQ,CACX,SAAUC,EAAYf,CAAM,CAAA,CAC5B,EAEKgB,EAAaL,GAAYC,GAAaC,EAEtCI,EAAWP,EAAcQ,GAAS,CACvCX,EAAI,KACF,IACAY,EAAO,SAASf,EAAO,MAAM,GAAIA,EAAO,KAAM,EAAE,EAChD,OACA,OACAc,EAAK,OACF,CACA,qBAAsBA,EAAK,MAAA,EAE3B,MACJ,EACC,KAAK,IAAM,CACXE,EAAgB,IAAI,OAAO,CAAA,CAC3B,EACA,MAAOC,GAAM,CACb,QAAQ,MAAMA,CAAC,CAAA,CACf,CAAA,CACF,EAGA,OAAAC,EAAA,KAACC,EAAA,CACC,GAAGjB,EACJ,MAAO,SAAQkB,EAAApB,EAAO,OAAP,YAAAoB,EAAa,QAAQ,IACpC,mBACE3B,EAAgB,CAAA,SAAA,CAAA,uCACc,IAAE,CAAA,SAAA,CAAA,KAAE4B,EAAArB,EAAO,OAAP,YAAAqB,EAAa,QAAA,EAAS,EAAI,0DAAA,EAE7D,EAED,QAAS,CACR,CACC,QAASR,EACT,SAAWS,EAAAA,IAAA,OAAA,CAAK,SAAG,KAAA,CAAA,EACnB,QAAS,SACT,aAAc,GACd,SAAUV,EACV,KAAM,OACP,EACA,CACC,QAAS,IAAMI,EAAgB,IAAI,OAAO,EAC1C,SAAWM,EAAAA,IAAA,OAAA,CAAK,SAAM,QAAA,CAAA,EACtB,QAAS,OACT,SAAUV,EACV,KAAM,OAAA,CAER,EAEA,SAAA,CAAAU,EAAA,IAAC,MAAA,CACA,IAAI,kEACJ,QAAQ,OACR,IAAI,kBACJ,OAAQ,IACR,MAAO,CACN,aAAc,GACd,aAAc,CAAA,CACf,CACD,EAECA,EAAAA,IAAA3B,EAAA,CAAU,GAAGU,EAAS,QAAQ,EAAG,GAAG,SAAS,KAAK,SAAS,YAAY,SAAS,UAAW,GAAK,CAAA,CAAA,CAAA,CAClG,CAEF"}