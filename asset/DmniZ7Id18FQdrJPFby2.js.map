{"version":3,"file":"DmniZ7Id18FQdrJPFby2.js","sources":["../../src/hooks/useContextMenu.tsx"],"sourcesContent":["import { autoUpdate, flip, offset, shift, useDismiss, useFloating, useInteractions, useRole } from \"@floating-ui/react\";\nimport { useMemo, useState } from \"react\";\nimport ChannelContextMenu from \"../components/contextMenus/ChannelContextMenu\";\nimport ChannelMentionContextMenu from \"../components/contextMenus/ChannelMentionContextMenu\";\nimport GuildContextMenu from \"../components/contextMenus/GuildContextMenu\";\nimport MessageContextMenu from \"../components/contextMenus/MessageContextMenu\";\nimport UserContextMenu from \"../components/contextMenus/UserContextMenu\";\nimport { ContextMenuProps } from \"../contexts/ContextMenuContext\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Components = Record<string, React.FC<any>>;\n\nexport const ContextMenuComponents: Components = {\n\tuser: UserContextMenu,\n\tmessage: MessageContextMenu,\n\tchannel: ChannelContextMenu,\n\tchannelMention: ChannelMentionContextMenu,\n\tguild: GuildContextMenu,\n};\n\nexport default function () {\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [props, setProps] = useState<ContextMenuProps | null>(null);\n\n\tconst data = useFloating({\n\t\tplacement: \"right-start\",\n\t\tstrategy: \"fixed\",\n\t\topen: isOpen && props !== null,\n\t\tonOpenChange: setIsOpen,\n\t\twhileElementsMounted: autoUpdate,\n\t\tmiddleware: [\n\t\t\toffset(5),\n\t\t\tflip({\n\t\t\t\tfallbackPlacements: [\"left-start\"],\n\t\t\t}),\n\t\t\tshift({\n\t\t\t\tpadding: 8,\n\t\t\t}),\n\t\t],\n\t});\n\n\tconst context = data.context;\n\n\tconst role = useRole(context, { role: \"menu\" });\n\tconst dismiss = useDismiss(context);\n\t//   const listNavigation = useListNavigation(context, {\n\t//     listRef: listItemsRef,\n\t//     onNavigate: setActiveIndex,\n\t//     activeIndex\n\t//   });\n\t//   const typeahead = useTypeahead(context, {\n\t//     enabled: isOpen,\n\t//     listRef: listContentRef,\n\t//     onMatch: setActiveIndex,\n\t//     activeIndex\n\t//   });\n\n\tconst interactions = useInteractions([dismiss, role]);\n\n\tconst open = (props: ContextMenuProps) => {\n\t\tsetProps(props);\n\t\tsetIsOpen(true);\n\t};\n\n\tconst close = () => {\n\t\tsetIsOpen(false);\n\t};\n\n\tfunction onContextMenu(e: React.MouseEvent, props: ContextMenuProps) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tdata.refs.setPositionReference({\n\t\t\tgetBoundingClientRect() {\n\t\t\t\treturn {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t\ttop: e.clientY,\n\t\t\t\t\tright: e.clientX,\n\t\t\t\t\tbottom: e.clientY,\n\t\t\t\t\tleft: e.clientX,\n\t\t\t\t};\n\t\t\t},\n\t\t});\n\n\t\tsetProps(props);\n\t\tsetIsOpen(true);\n\t}\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\tisOpen,\n\t\t\tprops,\n\t\t\tsetProps,\n\t\t\topen,\n\t\t\tclose,\n\t\t\tonContextMenu,\n\t\t\t...interactions,\n\t\t\t...data,\n\t\t}),\n\t\t[isOpen, props, setProps, open, close, onContextMenu, interactions, data],\n\t);\n}\n"],"names":["ContextMenuComponents","UserContextMenu","MessageContextMenu","ChannelContextMenu","ChannelMentionContextMenu","GuildContextMenu","useContextMenu","isOpen","setIsOpen","useState","props","setProps","data","useFloating","autoUpdate","offset","flip","shift","context","role","useRole","dismiss","useDismiss","interactions","useInteractions","open","close","onContextMenu","e","useMemo"],"mappings":"oVAYO,MAAMA,EAAoC,CAChD,KAAMC,EACN,QAASC,EACT,QAASC,EACT,eAAgBC,EAChB,MAAOC,CACR,EAE2B,SAAAC,GAAA,CAC1B,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAK,EACpC,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAkC,IAAI,EAE1DG,EAAOC,EAAY,CACxB,UAAW,cACX,SAAU,QACV,KAAMN,GAAUG,IAAU,KAC1B,aAAcF,EACd,qBAAsBM,EACtB,WAAY,CACXC,EAAO,CAAC,EACRC,EAAK,CACJ,mBAAoB,CAAC,YAAY,CAAA,CACjC,EACDC,EAAM,CACL,QAAS,CACT,CAAA,CAAA,CACF,CACA,EAEKC,EAAUN,EAAK,QAEfO,EAAOC,EAAQF,EAAS,CAAE,KAAM,OAAQ,EACxCG,EAAUC,EAAWJ,CAAO,EAa5BK,EAAeC,EAAgB,CAACH,EAASF,CAAI,CAAC,EAE9CM,EAAQf,GAA4B,CACzCC,EAASD,CAAK,EACdF,EAAU,EAAI,CACf,EAEMkB,EAAQ,IAAM,CACnBlB,EAAU,EAAK,CAChB,EAES,SAAAmB,EAAcC,EAAqBlB,EAAyB,CACpEkB,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAElBhB,EAAK,KAAK,qBAAqB,CAC9B,uBAAwB,CAChB,MAAA,CACN,MAAO,EACP,OAAQ,EACR,EAAGgB,EAAE,QACL,EAAGA,EAAE,QACL,IAAKA,EAAE,QACP,MAAOA,EAAE,QACT,OAAQA,EAAE,QACV,KAAMA,EAAE,OACT,CAAA,CACD,CACA,EAEDjB,EAASD,CAAK,EACdF,EAAU,EAAI,CAAA,CAGR,OAAAqB,EAAA,QACN,KAAO,CACN,OAAAtB,EACA,MAAAG,EACA,SAAAC,EACA,KAAAc,EACA,MAAAC,EACA,cAAAC,EACA,GAAGJ,EACH,GAAGX,CAAA,GAEJ,CAACL,EAAQG,EAAOC,EAAUc,EAAMC,EAAOC,EAAeJ,EAAcX,CAAI,CACzE,CACD"}