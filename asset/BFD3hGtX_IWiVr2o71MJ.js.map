{"version":3,"file":"BFD3hGtX_IWiVr2o71MJ.js","sources":["../../src/components/Spoiler.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.span`\n\tbackground-color: hsl(var(--background-tertiary-hsl));\n\tpadding: 0 5px;\n\tborder-radius: 4px;\n\twidth: fit-content;\n\ttransition: background-color 0.1s ease;\n\n\t&:hover {\n\t\tbackground-color: hsl(var(--background-tertiary-hsl) / 0.3);\n\t\tcursor: pointer;\n\t}\n\n\t&.visible {\n\t\tbackground-color: hsl(var(--background-tertiary-hsl) / 0.3);\n\t\tcursor: pointer;\n\t}\n\n\t.text {\n\t\topacity: 0;\n\t\ttransition: opacity 0.1s ease;\n\t}\n\n\t&.visible .text {\n\t\topacity: 1;\n\t}\n`;\n\ninterface Props {\n\tchildren: React.ReactNode;\n}\n\nfunction Spoiler({ children }: Props) {\n\tconst [shown, setShown] = useState(false);\n\tconst containerRef = useRef<HTMLSpanElement | null>(null);\n\n\tconst show = () => setShown(true);\n\n\tuseEffect(() => {\n\t\tconst handleIntersection = (entries: IntersectionObserverEntry[]) => {\n\t\t\t// when the element is not in the viewport, hide the spoiler\n\t\t\tif (entries[0].intersectionRatio === 0 && shown) {\n\t\t\t\tsetShown(false);\n\t\t\t}\n\t\t};\n\n\t\tconst observer = new IntersectionObserver(handleIntersection);\n\n\t\tif (containerRef.current) {\n\t\t\tobserver.observe(containerRef.current);\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (containerRef.current) {\n\t\t\t\tobserver.unobserve(containerRef.current);\n\t\t\t}\n\t\t};\n\t}, [shown]);\n\n\treturn (\n\t\t<Container className={shown ? \"visible\" : \"\"} onClick={show} ref={containerRef}>\n\t\t\t<span className=\"text\">{children}</span>\n\t\t</Container>\n\t);\n}\n\nexport default Spoiler;\n"],"names":["Container","styled","Spoiler","children","shown","setShown","useState","containerRef","useRef","show","useEffect","handleIntersection","entries","observer","jsx"],"mappings":"4DAGA,MAAMA,EAAYC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA+BzB,SAASC,EAAQ,CAAE,SAAAC,GAAmB,CACrC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAK,EAClCC,EAAeC,SAA+B,IAAI,EAElDC,EAAO,IAAMJ,EAAS,EAAI,EAEhCK,OAAAA,EAAAA,UAAU,IAAM,CACT,MAAAC,EAAsBC,GAAyC,CAEhEA,EAAQ,CAAC,EAAE,oBAAsB,GAAKR,GACzCC,EAAS,EAAK,CAEhB,EAEMQ,EAAW,IAAI,qBAAqBF,CAAkB,EAE5D,OAAIJ,EAAa,SACPM,EAAA,QAAQN,EAAa,OAAO,EAG/B,IAAM,CACRA,EAAa,SACPM,EAAA,UAAUN,EAAa,OAAO,CAEzC,CAAA,EACE,CAACH,CAAK,CAAC,EAGRU,EAAA,IAAAd,EAAA,CAAU,UAAWI,EAAQ,UAAY,GAAI,QAASK,EAAM,IAAKF,EACjE,SAACO,EAAAA,IAAA,OAAA,CAAK,UAAU,OAAQ,SAAAX,CAAS,CAAA,EAClC,CAEF"}