import{q as f,u as h,a9 as j,aa as v,j as e}from"./DIBLJojdTQB51I2zM4gm.js";import{m as a}from"./BjsUGUt7urnTyqNcsXw0.js";import"./cCp-HAoOPHGa1LpyJzlu.js";import{u as b}from"./BV-6LX_Gn8Wz_usUCJsP.js";import{u as y}from"./DMCex30FeWvvThtDj-pY.js";import{m as L}from"./BDzl6LkRQpjGU2VD4La_.js";import{L as k,b as E,a as I,I as S}from"./CZVscq1LCMTLxcs1s_Ud.js";import{T as w}from"./CHC-6lQNrhE48vMQfRqn.js";import{M as C}from"./DmxfqvkvHbXivuP6yLMs.js";const F=f.div`
	display: flex;
	flex-direction: column;
`;function G({...d}){const c=y("JoinServerModal"),m=b(),p=h(),{register:u,handleSubmit:g,formState:{errors:o,isLoading:n},setError:s,setValue:J}=j(),l=g(i=>{const x=i.code.split("/").reverse()[0];m.rest.post(v.invite(x)).then(r=>{p(`/channels/${r.guild_id}/${r.channel_id}`),a.closeAll()}).catch(r=>{if("message"in r)if(r.errors){const t=L(r.errors);t?s(t.field,{type:"manual",message:t.error}):s("code",{type:"manual",message:r.message})}else s("code",{type:"manual",message:r.message});else c.error(r),s("code",{type:"manual",message:"Unknown Error"})})});return e.jsx(C,{...d,onClose:()=>a.closeAll(),title:"Join a Guild",description:"Enter an invite below to join an existing guild.",actions:[{onClick:l,children:e.jsx("span",{children:"Join"}),palette:"primary",confirmation:!0,disabled:n},{onClick:()=>a.pop("close"),children:e.jsx("span",{children:"Back"}),palette:"link",disabled:n}],children:e.jsx("form",{onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),l())},children:e.jsxs(F,{children:[e.jsxs(k,{error:!!o.code,children:[e.jsx(E,{children:"Invite Link"}),o.code&&e.jsx(I,{children:e.jsxs(e.Fragment,{children:[e.jsx(w,{children:"-"}),o.code.message]})})]}),e.jsx(S,{...u("code",{required:!0}),placeholder:`${window.location.origin}/invite/`,type:"text",maxLength:9999,required:!0,error:!!o.code,disabled:n,autoFocus:!0,minLength:6})]})})})}export{G as J};
//# sourceMappingURL=y-iv1Thkuwjgv8pmrwvR.js.map
