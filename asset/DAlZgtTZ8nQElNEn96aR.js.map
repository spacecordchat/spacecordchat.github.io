{"version":3,"file":"DAlZgtTZ8nQElNEn96aR.js","sources":["../../src/components/Codeblock.tsx"],"sourcesContent":["// adapted from Revite\n// https://github.com/revoltchat/revite/blob/fe63c6633f32b54aa1989cb34627e72bb3377efd/src/components/markdown/plugins/Codeblock.tsx\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport Floating from \"./floating/Floating\";\nimport FloatingTrigger from \"./floating/FloatingTrigger\";\n\nconst Actions = styled.div`\n\tposition: absolute;\n\ttop: 10px;\n\tright: 10px;\n\tdisplay: flex;\n\tgap: 5px;\n\n\ta {\n\t\tcolor: var(--text);\n\t\tcursor: pointer;\n\t\tpadding: 2px 6px;\n\t\tfont-weight: 600;\n\t\tuser-select: none;\n\t\tdisplay: inline-block;\n\t\tbackground: var(--background-tertiary);\n\n\t\tfont-size: 10px;\n\t\ttext-transform: uppercase;\n\t}\n`;\n\ninterface Props {\n\tclass?: string;\n\tlang?: string;\n\tchildren: React.ReactNode;\n}\n\n/**\n * Render a codeblock with copy text button\n */\n\nfunction CodeBlock(props: Props) {\n\tconst ref = React.useRef<HTMLPreElement>(null);\n\n\tlet text = \"Copy\";\n\tif (props.class) {\n\t\ttext = props.class.split(\"-\")[1];\n\t}\n\n\tconst onCopy = React.useCallback(() => {\n\t\tconst text = ref.current?.querySelector(\"code\")?.innerText;\n\t\ttext && navigator.clipboard.writeText(text);\n\t}, [ref]);\n\n\treturn (\n\t\t<pre\n\t\t\tref={ref}\n\t\t\tstyle={{\n\t\t\t\tposition: \"relative\",\n\t\t\t}}\n\t\t>\n\t\t\t<Actions>\n\t\t\t\t<Floating\n\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\ttype=\"tooltip\"\n\t\t\t\t\tprops={{\n\t\t\t\t\t\tcontent: <span>\"Copy to Clipboard</span>,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t\t<a onClick={onCopy}>{text}</a>\n\t\t\t\t\t</FloatingTrigger>\n\t\t\t\t</Floating>\n\t\t\t</Actions>\n\t\t\t{props.children}\n\t\t</pre>\n\t);\n}\n\nexport default CodeBlock;\n"],"names":["Actions","styled","CodeBlock","props","ref","React","text","onCopy","_b","_a","jsxs","jsx","Floating","FloatingTrigger"],"mappings":"wJAQA,MAAMA,EAAUC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA+BvB,SAASC,EAAUC,EAAc,CAC1B,MAAAC,EAAMC,EAAM,OAAuB,IAAI,EAE7C,IAAIC,EAAO,OACPH,EAAM,QACTG,EAAOH,EAAM,MAAM,MAAM,GAAG,EAAE,CAAC,GAG1B,MAAAI,EAASF,EAAM,YAAY,IAAM,SACtC,MAAMC,GAAOE,GAAAC,EAAAL,EAAI,UAAJ,YAAAK,EAAa,cAAc,UAA3B,YAAAD,EAAoC,UACjDF,GAAQ,UAAU,UAAU,UAAUA,CAAI,CAAA,EACxC,CAACF,CAAG,CAAC,EAGP,OAAAM,EAAA,KAAC,MAAA,CACA,IAAAN,EACA,MAAO,CACN,SAAU,UACX,EAEA,SAAA,CAAAO,MAACX,EACA,CAAA,SAAAW,EAAA,IAACC,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,QAAUD,EAAAA,IAAA,OAAA,CAAK,SAAkB,oBAAA,CAAA,CAClC,EAEA,eAACE,EACA,CAAA,SAAAF,EAAA,IAAC,KAAE,QAASJ,EAAS,UAAK,CAAA,CAC3B,CAAA,CAAA,CAAA,EAEF,EACCJ,EAAM,QAAA,CAAA,CACR,CAEF"}