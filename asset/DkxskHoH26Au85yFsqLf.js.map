{"version":3,"file":"DkxskHoH26Au85yFsqLf.js","sources":["../../src/components/floating/UserProfilePopout.tsx"],"sourcesContent":["import styled from \"styled-components\";\nimport useLogger from \"../../hooks/useLogger\";\nimport GuildMember from \"../../stores/objects/GuildMember\";\nimport User from \"../../stores/objects/User\";\nimport Snowflake from \"../../utils/Snowflake\";\nimport Avatar from \"../Avatar\";\nimport { HorizontalDivider } from \"../Divider\";\n\nimport { CDNRoutes, ImageFormat } from \"@spacebarchat/spacebar-api-types/v9\";\nimport dayjs from \"dayjs\";\nimport SpacebarLogoBlue from \"../../assets/images/logo/Spacebar_Icon.svg?react\";\nimport { useAppStore } from \"../../hooks/useAppStore\";\nimport REST from \"../../utils/REST\";\nimport Floating from \"./Floating\";\nimport FloatingTrigger from \"./FloatingTrigger\";\n\nconst Container = styled.div`\n\tbackground-color: #252525;\n\tborder-radius: 4px;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 340px;\n\tmax-height: 600px;\n\toverflow: hidden;\n\tbox-shadow:\n\t\t0 0 0 1px rgb(0 0 0 / 15%),\n\t\t0 4px 8px rgb(0 0 0 / 15%);\n\tcolor: var(--text);\n`;\n\nconst Top = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst Bottom = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: var(--background-tertiary);\n\tborder-radius: 4px;\n\tmargin: 0 16px 16px;\n\tmax-height: 340px;\n\tgap: 8px;\n\n\t& > :first-child {\n\t\tpadding: 12px 12px 0 12px;\n\t}\n\n\t& > :nth-child(n + 3) {\n\t\tpadding: 0 12px;\n\t}\n\n\t& > :last-child {\n\t\tpadding: 0 12px 12px 12px;\n\t}\n`;\n\nconst Section = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst UsernameWrapper = styled.div`\n\ttext-overflow: clip;\n\twhite-space: nowrap;\n\toverflow: hidden;\n`;\n\nconst NicknameText = styled.span`\n\tfont-size: 20px;\n\tfont-weight: var(--font-weight-bold);\n`;\n\nconst UsernameText = styled.span`\n\tfont-size: 14px;\n\tfont-weight: var(--font-weight-medium);\n`;\n\nconst Heading = styled.span`\n\tdisplay: flex;\n\tfont-weight: var(--font-weight-bold);\n\tmargin-bottom: 6px;\n\tfont-size: 12px;\n\tuser-select: none;\n`;\n\nconst MemberSinceContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tcolumn-gap: 8px;\n\talign-items: center;\n\tuser-select: none;\n`;\n\nconst MemberSinceText = styled.span`\n\tfont-size: 14px;\n\tfont-weight: var(--font-weight-regular);\n`;\n\nconst Acronym = styled.div`\n\tfont-size: 8px;\n\tbackground-image: none;\n\tbackground-color: var(--background-secondary);\n\ttext-align: center;\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n`;\n\nconst AcronymText = styled.div`\n\tfont-weight: var(--font-weight-bold);\n\toverflow: hidden;\n\twhite-space: nowrap;\n`;\n\nconst RoleList = styled.div`\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tposition: relative;\n\tmargin-top: 2px;\n`;\n\nconst RolePillDot = styled.span<{ color?: string }>`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 12px;\n\theight: 12px;\n\tborder-radius: 50%;\n\tpadding: 0;\n\tmargin: 0 4px;\n\tbackground-color: ${(props) => props.color ?? \"var(--text-disabled)\"};\n`;\n\nconst RolePill = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 12px;\n\tfont-weight: var(--font-weight-medium);\n\tbackground-color: var(--background-primary-alt);\n\tborder-radius: 12px;\n\tbox-sizing: border-box;\n\theight: 22px;\n\tmargin: 0 4px 4px 0;\n\tpadding: 8px;\n`;\n\nconst RoleName = styled.div`\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\tmax-width: 200px;\n`;\n\ninterface Props {\n\tuser: User;\n\tmember?: GuildMember;\n}\n\nfunction UserProfilePopout({ user, member }: Props) {\n\tconst app = useAppStore();\n\tconst logger = useLogger(\"UserProfilePopout\");\n\n\tconst id = user.id;\n\tconst { timestamp: createdAt } = Snowflake.deconstruct(id);\n\tconst presence = app.presences.get(user.id);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Top>\n\t\t\t\t<Avatar\n\t\t\t\t\tstyle={{ margin: \"22px 16px\" }}\n\t\t\t\t\tsize={80}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t// TODO: open profile modal\n\t\t\t\t\t\tlogger.debug(\"open profile modal\");\n\t\t\t\t\t}}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tpresence={presence}\n\t\t\t\t\tstatusDotStyle={{\n\t\t\t\t\t\tsize: 25,\n\t\t\t\t\t\tborderThickness: 0.3,\n\t\t\t\t\t}}\n\t\t\t\t\tshowPresence\n\t\t\t\t\tisFloating\n\t\t\t\t/>\n\t\t\t</Top>\n\t\t\t<Bottom>\n\t\t\t\t<Section>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<UsernameWrapper>\n\t\t\t\t\t\t\t<NicknameText>{member?.nick ?? user.username}</NicknameText>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<UsernameText>\n\t\t\t\t\t\t\t\t\t{user.username}#{user.discriminator}\n\t\t\t\t\t\t\t\t</UsernameText>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</UsernameWrapper>\n\t\t\t\t\t</div>\n\t\t\t\t</Section>\n\t\t\t\t<HorizontalDivider\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmargin: \"0 12px\",\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Section>\n\t\t\t\t\t<Heading>Member Since</Heading>\n\t\t\t\t\t<MemberSinceContainer>\n\t\t\t\t\t\t<Floating\n\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\ttype=\"tooltip\"\n\t\t\t\t\t\t\tprops={{\n\t\t\t\t\t\t\t\tcontent: <span>Spacebar</span>,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<SpacebarLogoBlue width={16} height={16} style={{ borderRadius: \"50%\" }} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</FloatingTrigger>\n\t\t\t\t\t\t</Floating>\n\t\t\t\t\t\t<MemberSinceText>{dayjs(createdAt).format(\"MMM D, YYYY\")}</MemberSinceText>\n\t\t\t\t\t\t{member && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\theight: \"4px\",\n\t\t\t\t\t\t\t\t\t\twidth: \"4px\",\n\t\t\t\t\t\t\t\t\t\tborderRadius: \"50%\",\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: \"var(--text-disabled)\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<Floating\n\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\ttype=\"tooltip\"\n\t\t\t\t\t\t\t\t\tprops={{\n\t\t\t\t\t\t\t\t\t\tcontent: <span>{member.guild.name}</span>,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t\t\t\t\t\t{member.guild.icon ? (\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={REST.makeCDNUrl(\n\t\t\t\t\t\t\t\t\t\t\t\t\tCDNRoutes.guildIcon(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember.guild.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember.guild.icon,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tImageFormat.PNG,\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\twidth={16}\n\t\t\t\t\t\t\t\t\t\t\t\theight={16}\n\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: \"50%\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Acronym>\n\t\t\t\t\t\t\t\t\t\t\t\t<AcronymText>{member.guild.acronym}</AcronymText>\n\t\t\t\t\t\t\t\t\t\t\t</Acronym>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</FloatingTrigger>\n\t\t\t\t\t\t\t\t</Floating>\n\t\t\t\t\t\t\t\t<MemberSinceText>{dayjs(member.joined_at).format(\"MMM D, YYYY\")}</MemberSinceText>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</MemberSinceContainer>\n\t\t\t\t</Section>\n\n\t\t\t\t{member && (\n\t\t\t\t\t<Section>\n\t\t\t\t\t\t<Heading>{member.roles.length ? \"Roles\" : \"No Roles\"}</Heading>\n\t\t\t\t\t\t<RoleList>\n\t\t\t\t\t\t\t{member.roles.map((x, i) => (\n\t\t\t\t\t\t\t\t<RolePill key={i}>\n\t\t\t\t\t\t\t\t\t<RolePillDot color={x.color} />\n\t\t\t\t\t\t\t\t\t<RoleName>{x.name}</RoleName>\n\t\t\t\t\t\t\t\t</RolePill>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</RoleList>\n\t\t\t\t\t</Section>\n\t\t\t\t)}\n\t\t\t</Bottom>\n\t\t</Container>\n\t);\n}\n\nexport default UserProfilePopout;\n"],"names":["Container","styled","Top","Bottom","Section","UsernameWrapper","NicknameText","UsernameText","Heading","MemberSinceContainer","MemberSinceText","Acronym","AcronymText","RoleList","RolePillDot","props","RolePill","RoleName","UserProfilePopout","user","member","app","useAppStore","logger","useLogger","id","createdAt","Snowflake","presence","jsx","Avatar","e","jsxs","HorizontalDivider","Floating","FloatingTrigger","SpacebarLogoBlue","dayjs","Fragment","REST","CDNRoutes","ImageFormat","x","i"],"mappings":"weAgBA,MAAMA,EAAYC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcnBC,EAAMD,EAAO;AAAA;AAAA;AAAA,EAKbE,EAASF,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsBhBG,EAAUH,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAOjBI,EAAkBJ,EAAO;AAAA;AAAA;AAAA;AAAA,EAMzBK,EAAeL,EAAO;AAAA;AAAA;AAAA,EAKtBM,EAAeN,EAAO;AAAA;AAAA;AAAA,EAKtBO,EAAUP,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQjBQ,EAAuBR,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ9BS,EAAkBT,EAAO;AAAA;AAAA;AAAA,EAKzBU,EAAUV,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAajBW,EAAcX,EAAO;AAAA;AAAA;AAAA;AAAA,EAMrBY,EAAWZ,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAOlBa,EAAcb,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBASLc,GAAUA,EAAM,OAAS,sBAAsB;AAAA,EAG/DC,EAAWf,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAalBgB,EAAWhB,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAYxB,SAASiB,EAAkB,CAAE,KAAAC,EAAM,OAAAC,GAAiB,CACnD,MAAMC,EAAMC,EAAY,EAClBC,EAASC,EAAU,mBAAmB,EAEtCC,EAAKN,EAAK,GACV,CAAE,UAAWO,CAAA,EAAcC,EAAU,YAAYF,CAAE,EACnDG,EAAWP,EAAI,UAAU,IAAIF,EAAK,EAAE,EAE1C,cACEnB,EACA,CAAA,SAAA,CAAA6B,MAAC3B,EACA,CAAA,SAAA2B,EAAA,IAACC,EAAA,CACA,MAAO,CAAE,OAAQ,WAAY,EAC7B,KAAM,GACN,QAAUC,GAAM,CACfA,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAElBR,EAAO,MAAM,oBAAoB,CAClC,EACA,KAAAJ,EACA,SAAAS,EACA,eAAgB,CACf,KAAM,GACN,gBAAiB,EAClB,EACA,aAAY,GACZ,WAAU,EAAA,CAAA,EAEZ,SACCzB,EACA,CAAA,SAAA,CAAA0B,EAAAA,IAACzB,EACA,CAAA,SAAAyB,MAAC,MACA,CAAA,SAAAG,EAAA,KAAC3B,EACA,CAAA,SAAA,CAAAwB,EAAA,IAACvB,EAAc,CAAA,UAAAc,GAAA,YAAAA,EAAQ,OAAQD,EAAK,SAAS,EAC7CU,EAAA,IAAC,MACA,CAAA,SAAAG,EAAAA,KAACzB,EACC,CAAA,SAAA,CAAKY,EAAA,SAAS,IAAEA,EAAK,aAAA,CAAA,CACvB,CACD,CAAA,CAAA,CACD,CAAA,CACD,CAAA,EACD,EACAU,EAAA,IAACI,EAAA,CACA,MAAO,CACN,OAAQ,QAAA,CACT,CACD,SACC7B,EACA,CAAA,SAAA,CAAAyB,EAAAA,IAACrB,GAAQ,SAAY,cAAA,CAAA,SACpBC,EACA,CAAA,SAAA,CAAAoB,EAAA,IAACK,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,QAAUL,EAAAA,IAAA,OAAA,CAAK,SAAQ,UAAA,CAAA,CACxB,EAEA,eAACM,EACA,CAAA,SAAAN,EAAA,IAAC,MACA,CAAA,SAAAA,EAAAA,IAACO,GAAiB,MAAO,GAAI,OAAQ,GAAI,MAAO,CAAE,aAAc,KAAM,EAAG,EAC1E,CACD,CAAA,CAAA,CACD,QACC1B,EAAiB,CAAA,SAAA2B,EAAMX,CAAS,EAAE,OAAO,aAAa,EAAE,EACxDN,GAECY,EAAA,KAAAM,WAAA,CAAA,SAAA,CAAAT,EAAA,IAAC,MAAA,CACA,MAAO,CACN,OAAQ,MACR,MAAO,MACP,aAAc,MACd,gBAAiB,sBAAA,CAClB,CACD,EAEAA,EAAA,IAACK,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,QAASL,EAAA,IAAC,OAAM,CAAA,SAAAT,EAAO,MAAM,IAAK,CAAA,CACnC,EAEA,SAACS,EAAA,IAAAM,EAAA,CACC,SAAOf,EAAA,MAAM,KACbS,EAAA,IAAC,MAAA,CACA,IAAKU,EAAK,WACTC,EAAU,UACTpB,EAAO,MAAM,GACbA,EAAO,MAAM,KACbqB,EAAY,GAAA,CAEd,EACA,MAAO,GACP,OAAQ,GACR,QAAQ,OACR,MAAO,CACN,aAAc,KAAA,CACf,CACD,QAEC9B,EACA,CAAA,SAAAkB,EAAA,IAACjB,GAAa,SAAOQ,EAAA,MAAM,OAAQ,CAAA,CACpC,CAAA,CAEF,CAAA,CAAA,CACD,EACAS,MAACnB,GAAiB,SAAM2B,EAAAjB,EAAO,SAAS,EAAE,OAAO,aAAa,CAAE,CAAA,CAAA,CACjE,CAAA,CAAA,CAEF,CAAA,CAAA,EACD,EAECA,UACChB,EACA,CAAA,SAAA,CAAAyB,MAACrB,EAAS,CAAA,SAAAY,EAAO,MAAM,OAAS,QAAU,WAAW,EACrDS,EAAAA,IAAChB,GACC,SAAOO,EAAA,MAAM,IAAI,CAACsB,EAAGC,IACrBX,EAAAA,KAAChB,EACA,CAAA,SAAA,CAACa,EAAAA,IAAAf,EAAA,CAAY,MAAO4B,EAAE,KAAO,CAAA,EAC7Bb,EAAAA,IAACZ,EAAU,CAAA,SAAAyB,EAAE,IAAK,CAAA,CAAA,CAFJ,EAAAC,CAGf,CACA,CACF,CAAA,CAAA,CACD,CAAA,CAAA,CAEF,CAAA,CAAA,EACD,CAEF"}