{"version":3,"file":"DmxfqvkvHbXivuP6yLMs.js","sources":["../../src/components/modals/ModalComponents.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { Portal } from \"react-portal\";\nimport styled, { css } from \"styled-components\";\nimport Button, { Props as ButtonProps } from \"../Button\";\nimport Icon from \"../Icon\";\nimport { animationFadeIn, animationFadeOut, animationZoomIn, animationZoomOut } from \"../common/animations\";\n\nexport type ModalAction = Omit<React.HTMLAttributes<HTMLButtonElement>, \"as\"> &\n\tOmit<ButtonProps, \"onClick\"> & {\n\t\tconfirmation?: boolean;\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\tonClick: () => any | Promise<any>;\n\t};\n\ninterface ModalProps {\n\tchildren?: React.ReactNode;\n\tonClose?: (force: boolean) => void;\n\tsignal?: \"close\" | \"confirm\" | \"cancel\";\n\ttitle?: React.ReactNode;\n\tdescription?: React.ReactNode;\n\ttransparent?: boolean;\n\tnonDismissable?: boolean;\n\tmaxWidth?: string;\n\tmaxHeight?: string;\n\tpadding?: string;\n\tactions?: ModalAction[];\n\tdisabled?: boolean;\n\twithEmptyActionBar?: boolean;\n\twithoutCloseButton?: boolean;\n\tfullScreen?: boolean;\n}\n\n/**\n * Main container for all modals, handles the background overlay and positioning\n */\nexport const ModalBase = styled.div<{ closing?: boolean }>`\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\n\tz-index: 9999;\n\tposition: fixed;\n\n\tmax-height: 100%;\n\tuser-select: none;\n\n\tanimation-duration: 0.2s;\n\tanimation-fill-mode: forwards;\n\n\tdisplay: grid;\n\toverflow: hidden;\n\tplace-items: center;\n\n\tcolor: var(--text);\n\tbackground: rgba(0, 0, 0, 0.8);\n\n\t${(props) =>\n\t\tprops.closing\n\t\t\t? css`\n\t\t\t\t\tanimation-name: ${animationFadeOut};\n\n\t\t\t\t\t> div {\n\t\t\t\t\t\tanimation-name: ${animationZoomOut};\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t\t: css`\n\t\t\t\t\tanimation-name: ${animationFadeIn};\n\t\t\t\t`}\n`;\n\n/**\n * Wrapper for modal content, handles the sizing and positioning\n */\nexport const ModalWrapper = styled.div<\n\tPick<ModalProps, \"transparent\" | \"maxWidth\" | \"maxHeight\"> & { actions: boolean; fullScreen?: boolean }\n>`\n\tmargin: 20px;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\tanimation-name: ${animationZoomIn};\n\tanimation-duration: 0.25s;\n\tanimation-timing-function: cubic-bezier(0.3, 0.3, 0.18, 1.1);\n\n\toverflow: hidden;\n\tbackground: var(--background-tertiary);\n\n\t${(props) =>\n\t\t!props.fullScreen &&\n\t\tcss`\n\t\t\tmax-width: min(calc(100vw - 20px), ${props.maxWidth ?? \"450px\"});\n\t\t\tmax-height: min(calc(100vh - 20px), ${props.maxHeight ?? \"650px\"});\n\t\t`}\n\n\t${(props) =>\n\t\tprops.fullScreen &&\n\t\tcss`\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t`}\n\n\t${(props) =>\n\t\t!props.transparent &&\n\t\t!props.fullScreen &&\n\t\tcss`\n\t\t\tborder-radius: 8px;\n\t\t`}\n`;\n\nexport const ModalHeader = styled.div`\n\tpadding: 16px;\n\tflex-shrink: 0;\n\tword-break: break-word;\n\tgap: 8px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\ttext-align: center;\n`;\n\nexport const ModalContentContainer = styled.div<Pick<ModalProps, \"transparent\" | \"padding\">>`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\tpadding-top: 0;\n\tpadding: ${(props) => props.padding ?? \"0 16px 16px\"};\n\n\toverflow-y: auto;\n\tfont-size: 0.9375rem;\n`;\n\nconst Actions = styled.div`\n\tgap: 8px;\n\tdisplay: flex;\n\tpadding: 16px;\n\tflex-direction: row-reverse;\n\tbackground: var(--background-secondary);\n\tborder-radius: 0 0 4px 4px;\n`;\n\nexport const ModalSubHeaderText = styled.div`\n\tfont-size: 16px;\n\tfont-weight: var(--font-weight-regular);\n\tcolor: var(--text-header-secondary);\n\tmargin-top: 8px;\n`;\n\nexport const ModalHeaderText = styled.div`\n\tfont-size: 24px;\n\tfont-weight: var(--font-weight-bold);\n\tcolor: var(--text);\n\tmargin: 0;\n\tpadding: 0;\n`;\n\nexport const InputContainer = styled.div`\n\tmargin-top: 24px;\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\n/**\n * Wrapper for modal close button\n */\nexport const ModalCloseWrapper = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tpadding: 10px;\n\tcursor: pointer;\n\tcolor: var(--text-disabled);\n\n\t&:hover {\n\t\tcolor: var(--text);\n\t}\n`;\n\nexport function Modal({ title, description, ...props }: ModalProps) {\n\tconst [closing, setClosing] = useState(false);\n\n\tconst closeModal = useCallback(() => {\n\t\tsetClosing(true);\n\t\tif (!closing) setTimeout(() => props.onClose?.(true), 2e2);\n\t}, [closing, props]);\n\n\tconst confirm = useCallback(async () => {\n\t\tif (await props.actions?.find((x) => x.confirmation)?.onClick?.()) {\n\t\t\tcloseModal();\n\t\t}\n\t}, [props.actions]);\n\n\tuseEffect(() => {\n\t\tif (props.signal === \"confirm\") {\n\t\t\tconfirm();\n\t\t} else if (props.signal) {\n\t\t\tif (props.signal === \"close\" && props.nonDismissable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcloseModal();\n\t\t}\n\t}, [props.signal]);\n\n\treturn (\n\t\t<Portal>\n\t\t\t<ModalBase closing={closing} onClick={() => !props.nonDismissable && closeModal()}>\n\t\t\t\t<ModalWrapper {...props} onClick={(e) => e.stopPropagation()} actions={false}>\n\t\t\t\t\t{!props.withoutCloseButton && (\n\t\t\t\t\t\t<div style={{ position: \"relative\" }}>\n\t\t\t\t\t\t\t{!props.nonDismissable && (\n\t\t\t\t\t\t\t\t<ModalCloseWrapper onClick={closeModal}>\n\t\t\t\t\t\t\t\t\t<Icon icon=\"mdiClose\" size={1} />\n\t\t\t\t\t\t\t\t</ModalCloseWrapper>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{(title || description) && (\n\t\t\t\t\t\t<ModalHeader>\n\t\t\t\t\t\t\t{title && typeof title === \"string\" ? <ModalHeaderText>{title}</ModalHeaderText> : title}\n\t\t\t\t\t\t\t{description && typeof description === \"string\" ? (\n\t\t\t\t\t\t\t\t<ModalSubHeaderText>{description}</ModalSubHeaderText>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ModalHeader>\n\t\t\t\t\t)}\n\t\t\t\t\t<ModalContentContainer {...props}>{props.children}</ModalContentContainer>\n\t\t\t\t\t{props.actions && props.actions.length > 0 && (\n\t\t\t\t\t\t<Actions>\n\t\t\t\t\t\t\t{props.actions.map((x, index) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tdisabled={props.disabled}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t{...x}\n\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\tif (await x.onClick()) {\n\t\t\t\t\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Actions>\n\t\t\t\t\t)}\n\t\t\t\t</ModalWrapper>\n\t\t\t</ModalBase>\n\t\t</Portal>\n\t);\n}\n"],"names":["ModalBase","styled","props","css","animationFadeOut","animationZoomOut","animationFadeIn","ModalWrapper","animationZoomIn","ModalHeader","ModalContentContainer","Actions","ModalSubHeaderText","ModalHeaderText","InputContainer","ModalCloseWrapper","Modal","title","description","closing","setClosing","useState","closeModal","useCallback","_a","confirm","_c","_b","x","useEffect","jsx","Portal","jsxs","Icon","index","Button"],"mappings":"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"}