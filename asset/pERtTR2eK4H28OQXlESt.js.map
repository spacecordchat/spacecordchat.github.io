{"version":3,"file":"pERtTR2eK4H28OQXlESt.js","sources":["../../src/components/ErrorBoundary.tsx"],"sourcesContent":["// inspired by revite: https://github.com/revoltchat/revite/blob/master/src/lib/ErrorBoundary.tsx\n\nimport React from \"react\";\nimport { useErrorBoundary } from \"react-use-error-boundary\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\n\nconst Container = styled.div`\n\theight: 100%;\n\tpadding: 12px;\n\tbackground-color: var(--background-secondary);\n\tcolor: var(--text);\n\n\th3 {\n\t\tmargin: 0;\n\t\tmargin-bottom: 10px;\n\t}\n\n\tcode {\n\t\tfont-size: 12px;\n\t}\n`;\n\ninterface Props {\n\tchildren: React.ReactNode;\n\tsection: \"app\" | \"component\";\n}\n\nfunction ErrorBoundary({ children, section }: Props) {\n\tconst [error, resetError] = useErrorBoundary();\n\n\t// TODO: when v1 is reached, maybe we should add a \"report\" button here to submit errors to sentry\n\n\tif (error) {\n\t\tconst message = error instanceof Error ? error.message : (error as string);\n\t\tconst stack = error instanceof Error ? error.stack : undefined;\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t{section === \"app\" ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<h3>App Crash</h3>\n\t\t\t\t\t\t<Button onClick={resetError}>Ignore</Button>\n\t\t\t\t\t\t<Button onClick={() => location.reload()}>Reload</Button>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<h3>Component Error</h3>\n\t\t\t\t\t\t<Button onClick={resetError}>Ignore</Button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\t{message}\n\t\t\t\t<br />\n\t\t\t\t<code>{stack}</code>\n\t\t\t</Container>\n\t\t);\n\t}\n\n\treturn <>{children}</>;\n}\n\nexport default ErrorBoundary;\n"],"names":["Container","styled","ErrorBoundary","children","section","error","resetError","useErrorBoundary","message","stack","jsxs","Fragment","jsx","Button"],"mappings":"0GAOA,MAAMA,EAAYC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBzB,SAASC,EAAc,CAAE,SAAAC,EAAU,QAAAC,GAAkB,CACpD,KAAM,CAACC,EAAOC,CAAU,EAAIC,EAAiB,EAI7C,GAAIF,EAAO,CACV,MAAMG,EAAUH,aAAiB,MAAQA,EAAM,QAAWA,EACpDI,EAAQJ,aAAiB,MAAQA,EAAM,MAAQ,OACrD,cACEL,EACC,CAAA,SAAA,CAAAI,IAAY,MAEXM,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAS,WAAA,CAAA,EACZA,EAAA,IAAAC,EAAA,CAAO,QAASP,EAAY,SAAM,SAAA,QAClCO,EAAO,CAAA,QAAS,IAAM,SAAS,SAAU,SAAM,QAAA,CAAA,CAAA,CAAA,CACjD,EAGCH,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAe,iBAAA,CAAA,EAClBA,EAAA,IAAAC,EAAA,CAAO,QAASP,EAAY,SAAM,QAAA,CAAA,CAAA,EACpC,QAEA,KAAG,EAAA,QACH,KAAG,EAAA,EACHE,QACA,KAAG,EAAA,EACJI,EAAAA,IAAC,QAAM,SAAMH,CAAA,CAAA,CAAA,EACd,CAAA,CAIF,yBAAU,SAAAN,EAAS,CACpB"}