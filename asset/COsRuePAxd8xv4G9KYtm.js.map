{"version":3,"file":"COsRuePAxd8xv4G9KYtm.js","sources":["../../src/stores/objects/MessageBase.ts"],"sourcesContent":["// base class for messages and queued messages\n\nimport { Snowflake } from \"@spacebarchat/spacebar-api-types/globals\";\nimport { MessageType } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { observable } from \"mobx\";\nimport { USER_JOIN_MESSAGES } from \"../../utils/constants\";\nimport AppStore from \"../AppStore\";\nimport { MessageLikeData } from \"./Message\";\nimport User from \"./User\";\n\nexport default class MessageBase {\n\t/**\n\t * ID of the message\n\t */\n\tid: Snowflake;\n\t/**\n\t * Contents of the message\n\t */\n\t@observable content: string;\n\t/**\n\t * When this message was sent\n\t */\n\ttimestamp: Date;\n\t/**\n\t * Type of message\n\t */\n\ttype: MessageType;\n\tauthor: User;\n\n\tconstructor(\n\t\tpublic readonly app: AppStore,\n\t\tdata: MessageLikeData,\n\t) {\n\t\tthis.id = data.id;\n\t\tthis.content = data.content;\n\t\tthis.timestamp = new Date(data.timestamp);\n\t\tthis.type = data.type;\n\n\t\tif (this.app.users.has(data.author.id)) {\n\t\t\tthis.author = this.app.users.get(data.author.id) as User;\n\t\t} else {\n\t\t\tconst user = new User(data.author);\n\t\t\tthis.app.users.users.set(user.id, user);\n\t\t\tthis.author = user;\n\t\t}\n\t}\n\n\tgetJoinMessage() {\n\t\tif (this.type !== MessageType.UserJoin) throw new Error(\"Message is not a user join message\");\n\t\treturn USER_JOIN_MESSAGES[this.timestamp.getTime() % 13];\n\t}\n}\n"],"names":["MessageBase","app","data","__publicField","user","User","MessageType","USER_JOIN_MESSAGES","__decorateClass","observable"],"mappings":"0bAUA,MAAqBA,CAAY,CAmBhC,YACiBC,EAChBC,EACC,CAlBFC,EAAA,WAIYA,EAAA,gBAIZA,EAAA,kBAIAA,EAAA,aACAA,EAAA,eAWC,GARgB,KAAA,IAAAF,EAGhB,KAAK,GAAKC,EAAK,GACf,KAAK,QAAUA,EAAK,QACpB,KAAK,UAAY,IAAI,KAAKA,EAAK,SAAS,EACxC,KAAK,KAAOA,EAAK,KAEb,KAAK,IAAI,MAAM,IAAIA,EAAK,OAAO,EAAE,EACpC,KAAK,OAAS,KAAK,IAAI,MAAM,IAAIA,EAAK,OAAO,EAAE,MACzC,CACN,MAAME,EAAO,IAAIC,EAAKH,EAAK,MAAM,EACjC,KAAK,IAAI,MAAM,MAAM,IAAIE,EAAK,GAAIA,CAAI,EACtC,KAAK,OAASA,CAAA,CACf,CAGD,gBAAiB,CAChB,GAAI,KAAK,OAASE,EAAY,SAAgB,MAAA,IAAI,MAAM,oCAAoC,EAC5F,OAAOC,EAAmB,KAAK,UAAU,QAAA,EAAY,EAAE,CAAA,CAEzD,CAjCaC,EAAA,CAAXC,CAAA,EARmBT,EAQR,UAAA,SAAA"}