{"version":3,"file":"B2GY2kTrN4xEZtdf4H9T.js","sources":["../../src/components/floating/GuildMenuPopout.tsx"],"sourcesContent":["import styled from \"styled-components\";\nimport useLogger from \"../../hooks/useLogger\";\n\nimport React, { useEffect } from \"react\";\nimport { modalController } from \"../../controllers/modals\";\nimport { useAppStore } from \"../../hooks/useAppStore\";\nimport { Permissions } from \"../../utils/Permissions\";\nimport { ContextMenu, ContextMenuButton, ContextMenuDivider } from \"../contextMenus/ContextMenu\";\n\nconst CustomContextMenu = styled(ContextMenu)`\n\twidth: 200px;\n`;\n\nfunction GuildMenuPopout() {\n\tconst { activeGuild, account } = useAppStore();\n\tconst logger = useLogger(\"GuildMenuPopout\");\n\n\tconst [hasCreateChannelPermission, setHasCreateChannelPermission] = React.useState(false);\n\n\tuseEffect(() => {\n\t\tif (!activeGuild) return;\n\n\t\tconst permission = Permissions.getPermission(account!.id, activeGuild, undefined);\n\t\tconst hasPermission = permission.has(\"MANAGE_CHANNELS\");\n\t\tsetHasCreateChannelPermission(hasPermission);\n\t}, [activeGuild]);\n\n\tif (!activeGuild) {\n\t\tlogger.error(\"activeGuild is undefined\");\n\t\treturn null;\n\t}\n\n\tfunction leaveGuild() {\n\t\tmodalController.push({\n\t\t\ttype: \"leave_server\",\n\t\t\ttarget: activeGuild!,\n\t\t});\n\t}\n\n\tfunction onChannelCreateClick() {\n\t\tmodalController.push({\n\t\t\ttype: \"create_channel\",\n\t\t\tguild: activeGuild!,\n\t\t});\n\t}\n\n\treturn (\n\t\t<CustomContextMenu>\n\t\t\t<ContextMenuButton icon=\"mdiCog\" disabled>\n\t\t\t\tServer Settings\n\t\t\t</ContextMenuButton>\n\t\t\t{hasCreateChannelPermission && (\n\t\t\t\t<>\n\t\t\t\t\t<ContextMenuButton icon=\"mdiPlusCircle\" onClick={onChannelCreateClick}>\n\t\t\t\t\t\tCreate Channel\n\t\t\t\t\t</ContextMenuButton>\n\t\t\t\t\t<ContextMenuButton icon=\"mdiFolderPlus\" disabled>\n\t\t\t\t\t\tCreate Category\n\t\t\t\t\t</ContextMenuButton>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<ContextMenuDivider />\n\t\t\t<ContextMenuButton icon=\"mdiBell\" disabled>\n\t\t\t\tNotification Settings\n\t\t\t</ContextMenuButton>\n\t\t\t<ContextMenuButton icon=\"mdiShieldLock\" disabled>\n\t\t\t\tPrivacy Settings\n\t\t\t</ContextMenuButton>\n\t\t\t<ContextMenuDivider />\n\t\t\t<ContextMenuButton icon=\"mdiLocationExit\" destructive onClick={leaveGuild}>\n\t\t\t\tLeave Guild\n\t\t\t</ContextMenuButton>\n\t\t</CustomContextMenu>\n\t);\n}\n\nexport default GuildMenuPopout;\n"],"names":["CustomContextMenu","styled","ContextMenu","GuildMenuPopout","activeGuild","account","useAppStore","logger","useLogger","hasCreateChannelPermission","setHasCreateChannelPermission","React","useEffect","hasPermission","Permissions","leaveGuild","modalController","onChannelCreateClick","jsx","ContextMenuButton","jsxs","Fragment","ContextMenuDivider"],"mappings":"yVASA,MAAMA,EAAoBC,EAAOC,CAAW;AAAA;AAAA,EAI5C,SAASC,GAAkB,CAC1B,KAAM,CAAE,YAAAC,EAAa,QAAAC,CAAQ,EAAIC,EAAY,EACvCC,EAASC,EAAU,iBAAiB,EAEpC,CAACC,EAA4BC,CAA6B,EAAIC,EAAM,SAAS,EAAK,EAUxF,GARAC,EAAAA,UAAU,IAAM,CACf,GAAI,CAACR,EAAa,OAGZ,MAAAS,EADaC,EAAY,cAAcT,EAAS,GAAID,EAAa,MAAS,EAC/C,IAAI,iBAAiB,EACtDM,EAA8BG,CAAa,CAAA,EACzC,CAACT,CAAW,CAAC,EAEZ,CAACA,EACJ,OAAAG,EAAO,MAAM,0BAA0B,EAChC,KAGR,SAASQ,GAAa,CACrBC,EAAgB,KAAK,CACpB,KAAM,eACN,OAAQZ,CAAA,CACR,CAAA,CAGF,SAASa,GAAuB,CAC/BD,EAAgB,KAAK,CACpB,KAAM,iBACN,MAAOZ,CAAA,CACP,CAAA,CAGF,cACEJ,EACA,CAAA,SAAA,CAAAkB,MAACC,EAAkB,CAAA,KAAK,SAAS,SAAQ,GAAC,SAE1C,kBAAA,EACCV,GAECW,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAH,MAACC,EAAkB,CAAA,KAAK,gBAAgB,QAASF,EAAsB,SAEvE,iBAAA,QACCE,EAAkB,CAAA,KAAK,gBAAgB,SAAQ,GAAC,SAEjD,iBAAA,CAAA,CAAA,EACD,QAEAG,EAAmB,EAAA,QACnBH,EAAkB,CAAA,KAAK,UAAU,SAAQ,GAAC,SAE3C,wBAAA,QACCA,EAAkB,CAAA,KAAK,gBAAgB,SAAQ,GAAC,SAEjD,mBAAA,QACCG,EAAmB,EAAA,EACpBJ,EAAAA,IAACC,GAAkB,KAAK,kBAAkB,YAAW,GAAC,QAASJ,EAAY,SAE3E,aAAA,CAAA,CAAA,EACD,CAEF"}