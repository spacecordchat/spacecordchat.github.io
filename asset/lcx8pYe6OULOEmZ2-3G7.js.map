{"version":3,"file":"lcx8pYe6OULOEmZ2-3G7.js","sources":["../../src/components/contextMenus/GuildContextMenu.tsx"],"sourcesContent":["// loosely based on https://github.com/revoltchat/frontend/blob/master/components/app/menus/UserContextMenu.tsx\n\nimport { ChannelType } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { modalController } from \"../../controllers/modals\";\nimport { useAppStore } from \"../../hooks/useAppStore\";\nimport useLogger from \"../../hooks/useLogger\";\nimport Guild from \"../../stores/objects/Guild\";\nimport { ContextMenu, ContextMenuButton, ContextMenuDivider } from \"./ContextMenu\";\n\ninterface MenuProps {\n\tguild: Guild;\n}\n\nfunction GuildContextMenu({ guild }: MenuProps) {\n\tconst app = useAppStore();\n\tconst logger = useLogger(\"GuildContextMenu\");\n\tconst isNotOwner = guild.ownerId !== app.account!.id;\n\t/**\n\t * Copy id to clipboard\n\t */\n\tfunction copyId() {\n\t\tnavigator.clipboard.writeText(guild.id);\n\t}\n\n\t/**\n\t * Leave guild\n\t */\n\tfunction leaveGuild() {\n\t\tmodalController.push({\n\t\t\ttype: \"leave_server\",\n\t\t\ttarget: guild,\n\t\t});\n\t}\n\n\t/**\n\t * Open invite creation modal\n\t */\n\tfunction openInviteCreateModal() {\n\t\tconst channel = guild.channels.find((x) => x.type === ChannelType.GuildText);\n\t\tif (!channel) {\n\t\t\tlogger.error(\"Failed to find suitable channel for invite creation\");\n\t\t\treturn;\n\t\t}\n\t\tmodalController.push({\n\t\t\ttype: \"create_invite\",\n\t\t\ttarget: channel,\n\t\t});\n\t}\n\n\treturn (\n\t\t<ContextMenu>\n\t\t\t<ContextMenuButton onClick={openInviteCreateModal}>Create Invite</ContextMenuButton>\n\t\t\t<ContextMenuDivider />\n\t\t\t{isNotOwner && (\n\t\t\t\t<>\n\t\t\t\t\t<ContextMenuButton destructive onClick={leaveGuild}>\n\t\t\t\t\t\tLeave Guild\n\t\t\t\t\t</ContextMenuButton>\n\t\t\t\t\t<ContextMenuDivider />\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<ContextMenuButton\n\t\t\t\ticon=\"mdiIdentifier\"\n\t\t\t\ticonProps={{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tfilter: \"invert(100%)\",\n\t\t\t\t\t\tbackground: \"black\",\n\t\t\t\t\t\tborderRadius: \"4px\",\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonClick={copyId}\n\t\t\t>\n\t\t\t\tCopy Guild ID\n\t\t\t</ContextMenuButton>\n\t\t</ContextMenu>\n\t);\n}\n\nexport default GuildContextMenu;\n"],"names":["GuildContextMenu","guild","app","useAppStore","logger","useLogger","isNotOwner","copyId","leaveGuild","modalController","openInviteCreateModal","channel","x","ChannelType","ContextMenu","jsx","ContextMenuButton","ContextMenuDivider","jsxs","Fragment"],"mappings":"wRAaA,SAASA,EAAiB,CAAE,MAAAC,GAAoB,CAC/C,MAAMC,EAAMC,EAAY,EAClBC,EAASC,EAAU,kBAAkB,EACrCC,EAAaL,EAAM,UAAYC,EAAI,QAAS,GAIlD,SAASK,GAAS,CACP,UAAA,UAAU,UAAUN,EAAM,EAAE,CAAA,CAMvC,SAASO,GAAa,CACrBC,EAAgB,KAAK,CACpB,KAAM,eACN,OAAQR,CAAA,CACR,CAAA,CAMF,SAASS,GAAwB,CAC1B,MAAAC,EAAUV,EAAM,SAAS,KAAMW,GAAMA,EAAE,OAASC,EAAY,SAAS,EAC3E,GAAI,CAACF,EAAS,CACbP,EAAO,MAAM,qDAAqD,EAClE,MAAA,CAEDK,EAAgB,KAAK,CACpB,KAAM,gBACN,OAAQE,CAAA,CACR,CAAA,CAGF,cACEG,EACA,CAAA,SAAA,CAACC,EAAA,IAAAC,EAAA,CAAkB,QAASN,EAAuB,SAAa,gBAAA,QAC/DO,EAAmB,EAAA,EACnBX,GAECY,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAJ,MAACC,EAAkB,CAAA,YAAW,GAAC,QAASR,EAAY,SAEpD,cAAA,QACCS,EAAmB,CAAA,CAAA,CAAA,EACrB,EAEDF,EAAA,IAACC,EAAA,CACA,KAAK,gBACL,UAAW,CACV,MAAO,CACN,OAAQ,eACR,WAAY,QACZ,aAAc,KAAA,CAEhB,EACA,QAAST,EACT,SAAA,eAAA,CAAA,CAED,EACD,CAEF"}