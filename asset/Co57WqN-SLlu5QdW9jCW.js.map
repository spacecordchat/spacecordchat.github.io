{"version":3,"file":"Co57WqN-SLlu5QdW9jCW.js","sources":["../../src/stores/ReadStateStore.ts"],"sourcesContent":["import type { APIReadState } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { ObservableMap, action, computed, observable } from \"mobx\";\nimport AppStore from \"./AppStore\";\nimport ReadState from \"./objects/ReadState\";\n\nexport default class ReadStateStore {\n\tprivate readonly app: AppStore;\n\t@observable readonly readstates = new ObservableMap<string, ReadState>();\n\n\tconstructor(app: AppStore) {\n\t\tthis.app = app;\n\t}\n\n\t@action\n\tadd(readstate: APIReadState) {\n\t\tthis.readstates.set(readstate.id, new ReadState(this.app, readstate));\n\t}\n\n\t@action\n\tupdate(readstate: APIReadState) {\n\t\tconst existing = this.readstates.get(readstate.id);\n\t\tif (existing) {\n\t\t\texisting.update(readstate);\n\t\t} else {\n\t\t\tthis.add(readstate);\n\t\t}\n\t}\n\n\t@action\n\taddAll(readstates: APIReadState[]) {\n\t\treadstates?.forEach((readstate) => this.add(readstate));\n\t}\n\n\t/**\n\t * Get a channels readstate\n\t * @param id channel id\n\t * @returns\n\t */\n\tget(id: string) {\n\t\treturn this.readstates.get(id);\n\t}\n\n\t@computed\n\tget all() {\n\t\treturn Array.from(this.readstates.values());\n\t}\n\n\t@action\n\tremove(id: string) {\n\t\tthis.readstates.delete(id);\n\t}\n\n\t@computed\n\tget count() {\n\t\treturn this.readstates.size;\n\t}\n\n\thas(id: string) {\n\t\treturn this.readstates.has(id);\n\t}\n}\n"],"names":["ReadStateStore","app","__publicField","ObservableMap","readstate","ReadState","existing","readstates","id","__decorateClass","observable","action","computed"],"mappings":"ydAKA,MAAqBA,CAAe,CAInC,YAAYC,EAAe,CAHVC,EAAA,YACIA,EAAA,kBAAa,IAAIC,GAGrC,KAAK,IAAMF,CAAA,CAIZ,IAAIG,EAAyB,CACvB,KAAA,WAAW,IAAIA,EAAU,GAAI,IAAIC,EAAU,KAAK,IAAKD,CAAS,CAAC,CAAA,CAIrE,OAAOA,EAAyB,CAC/B,MAAME,EAAW,KAAK,WAAW,IAAIF,EAAU,EAAE,EAC7CE,EACHA,EAAS,OAAOF,CAAS,EAEzB,KAAK,IAAIA,CAAS,CACnB,CAID,OAAOG,EAA4B,CAClCA,GAAA,MAAAA,EAAY,QAASH,GAAc,KAAK,IAAIA,CAAS,EAAC,CAQvD,IAAII,EAAY,CACR,OAAA,KAAK,WAAW,IAAIA,CAAE,CAAA,CAI9B,IAAI,KAAM,CACT,OAAO,MAAM,KAAK,KAAK,WAAW,QAAQ,CAAA,CAI3C,OAAOA,EAAY,CACb,KAAA,WAAW,OAAOA,CAAE,CAAA,CAI1B,IAAI,OAAQ,CACX,OAAO,KAAK,WAAW,IAAA,CAGxB,IAAIA,EAAY,CACR,OAAA,KAAK,WAAW,IAAIA,CAAE,CAAA,CAE/B,CArDsBC,EAAA,CAApBC,CAAA,EAFmBV,EAEC,UAAA,aAAA,CAAA,EAOrBS,EAAA,CADCE,CAAA,EARmBX,EASpB,UAAA,MAAA,CAAA,EAKAS,EAAA,CADCE,CAAA,EAbmBX,EAcpB,UAAA,SAAA,CAAA,EAUAS,EAAA,CADCE,CAAA,EAvBmBX,EAwBpB,UAAA,SAAA,CAAA,EAcIS,EAAA,CADHG,CAAA,EArCmBZ,EAsChB,UAAA,MAAA,CAAA,EAKJS,EAAA,CADCE,CAAA,EA1CmBX,EA2CpB,UAAA,SAAA,CAAA,EAKIS,EAAA,CADHG,CAAA,EA/CmBZ,EAgDhB,UAAA,QAAA,CAAA"}