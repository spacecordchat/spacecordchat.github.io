{"version":3,"file":"BHX8nPHppnnJEG84AWuT.js","sources":["../../src/stores/objects/GuildMember.ts"],"sourcesContent":["import {\n\tAPIGuildMember,\n\tGatewayGuildMemberListUpdateMember,\n\tGuildMemberFlags,\n} from \"@spacebarchat/spacebar-api-types/v9\";\nimport { action, computed, observable } from \"mobx\";\nimport { PermissionResolvable, Permissions } from \"../../utils/Permissions\";\nimport AppStore from \"../AppStore\";\nimport Guild from \"./Guild\";\nimport Role from \"./Role\";\nimport User from \"./User\";\n\nexport default class GuildMember {\n\tprivate readonly app: AppStore;\n\tpublic readonly guild: Guild;\n\n\t@observable user?: User | undefined;\n\t@observable nick?: string | null | undefined;\n\t@observable avatar?: string | null | undefined;\n\t@observable roles: Role[];\n\t@observable joined_at: string;\n\t@observable premium_since?: string | null | undefined;\n\t@observable deaf: boolean;\n\t@observable mute: boolean;\n\t@observable flags: GuildMemberFlags;\n\t@observable pending?: boolean | undefined;\n\t@observable communication_disabled_until?: string | null | undefined;\n\n\tconstructor(app: AppStore, guild: Guild, data: APIGuildMember | GatewayGuildMemberListUpdateMember) {\n\t\tthis.app = app;\n\t\tthis.guild = guild;\n\n\t\tif (data.user) {\n\t\t\tthis.user = new User(data.user);\n\t\t}\n\t\tthis.nick = data.nick;\n\t\tthis.avatar = data.avatar;\n\t\tthis.roles = data.roles.map((role) => app.roles.get(role)).filter(Boolean) as Role[];\n\t\tthis.joined_at = data.joined_at;\n\t\tthis.premium_since = data.premium_since;\n\t\tthis.deaf = data.deaf;\n\t\tthis.mute = data.mute;\n\t\tthis.flags = data.flags;\n\t\tthis.pending = data.pending;\n\t\tthis.communication_disabled_until = data.communication_disabled_until;\n\t}\n\n\t@computed\n\tget roleColor() {\n\t\tconst highestRole = this.roles.reduce((prev, role) => {\n\t\t\tif (role.position > prev.position) return role;\n\t\t\treturn prev;\n\t\t}, this.roles[0]);\n\t\tif (highestRole?.color === \"#000000\") return; // TODO: why the fk do we use black as the default color???\n\t\treturn highestRole?.color;\n\t}\n\n\t@action\n\tupdate(member: APIGuildMember | GatewayGuildMemberListUpdateMember) {\n\t\tObject.assign(this, member);\n\t}\n\n\t@action\n\tasync kick(reason?: string) {\n\t\treturn this.guild.kickMember(this.user!.id, reason);\n\t}\n\n\t@action\n\tasync ban(reason?: string, deleteMessageSeconds?: number) {\n\t\treturn this.guild.banMember(this.user!.id, reason, deleteMessageSeconds);\n\t}\n\n\thasPermission(permission: PermissionResolvable) {\n\t\tconst permissions = Permissions.getPermission(this.app.account!.id, this.guild);\n\t\treturn permissions.has(permission);\n\t}\n}\n"],"names":["GuildMember","app","guild","data","__publicField","User","role","highestRole","prev","member","reason","deleteMessageSeconds","permission","Permissions","__decorateClass","observable","computed","action"],"mappings":"+fAYA,MAAqBA,CAAY,CAgBhC,YAAYC,EAAeC,EAAcC,EAA2D,CAfnFC,EAAA,YACDA,EAAA,cAEJA,EAAA,aACAA,EAAA,aACAA,EAAA,eACAA,EAAA,cACAA,EAAA,kBACAA,EAAA,sBACAA,EAAA,aACAA,EAAA,aACAA,EAAA,cACAA,EAAA,gBACAA,EAAA,qCAGX,KAAK,IAAMH,EACX,KAAK,MAAQC,EAETC,EAAK,OACR,KAAK,KAAO,IAAIE,EAAKF,EAAK,IAAI,GAE/B,KAAK,KAAOA,EAAK,KACjB,KAAK,OAASA,EAAK,OACnB,KAAK,MAAQA,EAAK,MAAM,IAAKG,GAASL,EAAI,MAAM,IAAIK,CAAI,CAAC,EAAE,OAAO,OAAO,EACzE,KAAK,UAAYH,EAAK,UACtB,KAAK,cAAgBA,EAAK,cAC1B,KAAK,KAAOA,EAAK,KACjB,KAAK,KAAOA,EAAK,KACjB,KAAK,MAAQA,EAAK,MAClB,KAAK,QAAUA,EAAK,QACpB,KAAK,6BAA+BA,EAAK,4BAAA,CAI1C,IAAI,WAAY,CACf,MAAMI,EAAc,KAAK,MAAM,OAAO,CAACC,EAAMF,IACxCA,EAAK,SAAWE,EAAK,SAAiBF,EACnCE,EACL,KAAK,MAAM,CAAC,CAAC,EACZ,IAAAD,GAAA,YAAAA,EAAa,SAAU,UAC3B,OAAOA,GAAA,YAAAA,EAAa,KAAA,CAIrB,OAAOE,EAA6D,CAC5D,OAAA,OAAO,KAAMA,CAAM,CAAA,CAI3B,MAAM,KAAKC,EAAiB,CAC3B,OAAO,KAAK,MAAM,WAAW,KAAK,KAAM,GAAIA,CAAM,CAAA,CAInD,MAAM,IAAIA,EAAiBC,EAA+B,CACzD,OAAO,KAAK,MAAM,UAAU,KAAK,KAAM,GAAID,EAAQC,CAAoB,CAAA,CAGxE,cAAcC,EAAkC,CAExC,OADaC,EAAY,cAAc,KAAK,IAAI,QAAS,GAAI,KAAK,KAAK,EAC3D,IAAID,CAAU,CAAA,CAEnC,CA5DaE,EAAA,CAAXC,CAAA,EAJmBf,EAIR,UAAA,OAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EALmBf,EAKR,UAAA,OAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EANmBf,EAMR,UAAA,SAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EAPmBf,EAOR,UAAA,QAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EARmBf,EAQR,UAAA,YAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EATmBf,EASR,UAAA,gBAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EAVmBf,EAUR,UAAA,OAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EAXmBf,EAWR,UAAA,OAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EAZmBf,EAYR,UAAA,QAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EAbmBf,EAaR,UAAA,UAAA,CAAA,EACAc,EAAA,CAAXC,CAAA,EAdmBf,EAcR,UAAA,+BAAA,CAAA,EAsBRc,EAAA,CADHE,CAAA,EAnCmBhB,EAoChB,UAAA,YAAA,CAAA,EAUJc,EAAA,CADCG,CAAA,EA7CmBjB,EA8CpB,UAAA,SAAA,CAAA,EAKMc,EAAA,CADLG,CAAA,EAlDmBjB,EAmDd,UAAA,OAAA,CAAA,EAKAc,EAAA,CADLG,CAAA,EAvDmBjB,EAwDd,UAAA,MAAA,CAAA"}