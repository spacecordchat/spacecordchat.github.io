{"version":3,"file":"k1cKPNCjinxL5Yc5XJhB.js","sources":["../../src/components/messaging/attachments/AttachmentUploadPreview.tsx"],"sourcesContent":["import { observer } from \"mobx-react-lite\";\nimport React, { Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport { bytesToSize, getFileDetails, getFileIcon } from \"../../../utils/Utils\";\nimport { HorizontalDivider } from \"../../Divider\";\nimport Icon from \"../../Icon\";\nimport IconButton from \"../../IconButton\";\nconst Container = styled.ul`\n\tdisplay: flex;\n\tgap: 8px;\n\tpadding: 10px;\n\toverflow-x: auto;\n\tlist-style: none;\n\tmargin: 0;\n`;\n\nconst FileContainer = styled.li`\n\tflex-direction: column;\n\tposition: relative;\n\tdisplay: inline-flex;\n\tbackground-color: var(--background-secondary);\n\tborder-radius: 4px;\n\tmargin: 0;\n\tpadding: 8px;\n\tmin-width: 200px;\n\tmax-width: 200px;\n\tmin-height: 200px;\n\tmax-height: 200px;\n`;\n\nconst InnerWrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tposition: relative;\n`;\n\nconst MediaContainer = styled.div`\n\tmargin-top: auto;\n\tmin-height: 0;\n\tdisplay: flex;\n\tjustify-content: center;\n`;\n\nconst Image = styled.img`\n\tborder-radius: 3px;\n\tmax-width: 100%;\n\tobject-fit: contain;\n`;\n\nconst Video = styled.video`\n\tborder-radius: 3px;\n\tmax-width: 100%;\n\tobject-fit: contain;\n\theight: 100%;\n`;\n\nconst ActionsContainer = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\ttransform: translate(25%, -25%);\n\tz-index: 1;\n`;\n\nconst ActionBarWrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--background-secondary);\n`;\n\nconst FileDetails = styled.div`\n\tmargin-top: auto;\n`;\n\nconst FileName = styled.div`\n\tmargin-top: 8px;\n\toverflow: hidden;\n\twhite-space: nowrap;\n\tfont-size: 16px;\n\tfont-weight: var(--font-weight-regular);\n\ttext-overflow: ellipsis;\n`;\n\nconst FileSize = styled.div`\n\tmargin-top: 8px;\n\toverflow: hidden;\n\twhite-space: nowrap;\n\tfont-size: 14px;\n\tfont-weight: var(--font-weight-regular);\n`;\n\ninterface FileProps {\n\tfile: File;\n\tremove: () => void;\n}\n\nfunction File({ file, remove }: FileProps) {\n\tconst generatePreviewElement = React.useCallback(() => {\n\t\tconst previewUrl = URL.createObjectURL(file);\n\t\tconst fileDetails = getFileDetails(file);\n\t\tif (fileDetails.isEmbeddable) {\n\t\t\tif (fileDetails.isVideo) return <Video preload=\"metadata\" aria-hidden=\"true\" src={previewUrl}></Video>;\n\t\t\tif (fileDetails.isImage) return <Image src={previewUrl} />;\n\t\t}\n\t\treturn <Icon size={5} icon={getFileIcon(file)} />;\n\t}, [file]);\n\n\treturn (\n\t\t<FileContainer>\n\t\t\t<InnerWrapper>\n\t\t\t\t<MediaContainer>{generatePreviewElement()}</MediaContainer>\n\t\t\t\t<ActionsContainer>\n\t\t\t\t\t<ActionBarWrapper>\n\t\t\t\t\t\t<IconButton onClick={remove}>\n\t\t\t\t\t\t\t<Icon size=\"24px\" icon=\"mdiTrashCan\" color=\"var(--danger)\" />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ActionBarWrapper>\n\t\t\t\t</ActionsContainer>\n\t\t\t\t<FileDetails>\n\t\t\t\t\t<FileName>{file.name}</FileName>\n\t\t\t\t\t<FileSize>{bytesToSize(file.size)}</FileSize>\n\t\t\t\t</FileDetails>\n\t\t\t</InnerWrapper>\n\t\t</FileContainer>\n\t);\n}\n\ninterface Props {\n\tattachments: File[];\n\tremove: (index: number) => void;\n}\n\nfunction AttachmentUploadList({ attachments, remove }: Props) {\n\tif (attachments.length === 0) return null;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\tflexDirection: \"column\",\n\t\t\t}}\n\t\t>\n\t\t\t<Container>\n\t\t\t\t{attachments.map((file, index) => (\n\t\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t\t<File file={file} remove={() => remove(index)} />\n\t\t\t\t\t</Fragment>\n\t\t\t\t))}\n\t\t\t</Container>\n\n\t\t\t<HorizontalDivider />\n\t\t</div>\n\t);\n}\n\nexport default observer(AttachmentUploadList);\n"],"names":["Container","styled","FileContainer","InnerWrapper","MediaContainer","Image","Video","ActionsContainer","ActionBarWrapper","FileDetails","FileName","FileSize","File","file","remove","generatePreviewElement","React","previewUrl","fileDetails","getFileDetails","jsx","Icon","getFileIcon","jsxs","IconButton","bytesToSize","AttachmentUploadList","attachments","index","Fragment","HorizontalDivider","AttachmentUploadList$1","observer"],"mappings":"gRAOA,MAAMA,EAAYC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASnBC,EAAgBD,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcvBE,EAAeF,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAOtBG,EAAiBH,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAOxBI,EAAQJ,EAAO;AAAA;AAAA;AAAA;AAAA,EAMfK,EAAQL,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAOfM,EAAmBN,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ1BO,EAAmBP,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ1BQ,EAAcR,EAAO;AAAA;AAAA,EAIrBS,EAAWT,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASlBU,EAAWV,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaxB,SAASW,EAAK,CAAE,KAAAC,EAAM,OAAAC,GAAqB,CACpC,MAAAC,EAAyBC,EAAM,YAAY,IAAM,CAChD,MAAAC,EAAa,IAAI,gBAAgBJ,CAAI,EACrCK,EAAcC,EAAeN,CAAI,EACvC,GAAIK,EAAY,aAAc,CACzB,GAAAA,EAAY,QAAS,OAAQE,EAAAA,IAAAd,EAAA,CAAM,QAAQ,WAAW,cAAY,OAAO,IAAKW,CAAY,CAAA,EAC9F,GAAIC,EAAY,QAAS,OAAQE,EAAAA,IAAAf,EAAA,CAAM,IAAKY,EAAY,CAAA,CAEzD,aAAQI,EAAK,CAAA,KAAM,EAAG,KAAMC,EAAYT,CAAI,EAAG,CAAA,EAC7C,CAACA,CAAI,CAAC,EAGR,OAAAO,EAAAA,IAAClB,EACA,CAAA,SAAAqB,EAAAA,KAACpB,EACA,CAAA,SAAA,CAACiB,EAAAA,IAAAhB,EAAA,CAAgB,WAAyB,CAAA,CAAA,QACzCG,EACA,CAAA,SAAAa,EAAA,IAACZ,GACA,SAACY,MAAAI,EAAA,CAAW,QAASV,EACpB,SAAAM,EAAA,IAACC,EAAK,CAAA,KAAK,OAAO,KAAK,cAAc,MAAM,eAAgB,CAAA,EAC5D,EACD,CACD,CAAA,SACCZ,EACA,CAAA,SAAA,CAACW,EAAAA,IAAAV,EAAA,CAAU,WAAK,IAAK,CAAA,EACpBU,EAAA,IAAAT,EAAA,CAAU,SAAYc,EAAAZ,EAAK,IAAI,CAAE,CAAA,CAAA,CACnC,CAAA,CAAA,CAAA,CACD,CACD,CAAA,CAEF,CAOA,SAASa,EAAqB,CAAE,YAAAC,EAAa,OAAAb,GAAiB,CACzD,OAAAa,EAAY,SAAW,EAAU,KAGpCJ,EAAA,KAAC,MAAA,CACA,MAAO,CACN,QAAS,OACT,cAAe,QAChB,EAEA,SAAA,CAAAH,EAAAA,IAACpB,GACC,SAAY2B,EAAA,IAAI,CAACd,EAAMe,UACtBC,EAAAA,SACA,CAAA,SAAAT,EAAA,IAACR,GAAK,KAAAC,EAAY,OAAQ,IAAMC,EAAOc,CAAK,EAAG,CADjC,EAAAA,CAEf,CACA,CACF,CAAA,QAECE,EAAkB,CAAA,CAAA,CAAA,CAAA,CACpB,CAEF,CAEA,MAAeC,EAAAC,EAASN,CAAoB"}