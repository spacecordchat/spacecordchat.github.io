{"version":3,"file":"BHW4NrUlhZuJMBkv90gF.js","sources":["../../src/stores/PresenceStore.ts"],"sourcesContent":["import type { GatewayPresenceUpdateDispatchData, Snowflake } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { action, computed, makeObservable, observable } from \"mobx\";\nimport AppStore from \"./AppStore\";\nimport Presence from \"./objects/Presence\";\n\nexport default class PresenceStore {\n\tprivate readonly app: AppStore;\n\t@observable presences = observable.map<Snowflake, Presence>();\n\n\tconstructor(app: AppStore) {\n\t\tthis.app = app;\n\n\t\tmakeObservable(this);\n\t}\n\n\t@action\n\tadd(data: GatewayPresenceUpdateDispatchData) {\n\t\tif (!this.presences.has(data.user.id)) {\n\t\t\tthis.presences.set(data.user.id, new Presence(this.app, data));\n\t\t} else {\n\t\t\tthis.update(data);\n\t\t}\n\t}\n\n\t@action\n\taddAll(data: GatewayPresenceUpdateDispatchData[]) {\n\t\tdata.forEach((p) => this.add(p));\n\t}\n\n\t@computed\n\tget all() {\n\t\treturn Array.from(this.presences.values());\n\t}\n\n\t@action\n\tremove(id: Snowflake) {\n\t\tthis.presences.delete(id);\n\t}\n\n\t@action\n\tupdate(data: GatewayPresenceUpdateDispatchData) {\n\t\tthis.presences.get(data.user.id)?.update(data);\n\t}\n\n\tget(id: Snowflake) {\n\t\treturn this.presences.get(id);\n\t}\n\n\thas(id: Snowflake) {\n\t\treturn this.presences.has(id);\n\t}\n\n\tasList() {\n\t\treturn Array.from(this.presences.values());\n\t}\n\n\tget size() {\n\t\treturn this.presences.size;\n\t}\n}\n"],"names":["PresenceStore","app","__publicField","observable","makeObservable","data","Presence","p","id","_a","__decorateClass","action","computed"],"mappings":"ydAKA,MAAqBA,CAAc,CAIlC,YAAYC,EAAe,CAHVC,EAAA,YACLA,EAAA,iBAAYC,EAAW,IAAyB,GAG3D,KAAK,IAAMF,EAEXG,EAAe,IAAI,CAAA,CAIpB,IAAIC,EAAyC,CACvC,KAAK,UAAU,IAAIA,EAAK,KAAK,EAAE,EAGnC,KAAK,OAAOA,CAAI,EAFX,KAAA,UAAU,IAAIA,EAAK,KAAK,GAAI,IAAIC,EAAS,KAAK,IAAKD,CAAI,CAAC,CAG9D,CAID,OAAOA,EAA2C,CACjDA,EAAK,QAASE,GAAM,KAAK,IAAIA,CAAC,CAAC,CAAA,CAIhC,IAAI,KAAM,CACT,OAAO,MAAM,KAAK,KAAK,UAAU,QAAQ,CAAA,CAI1C,OAAOC,EAAe,CAChB,KAAA,UAAU,OAAOA,CAAE,CAAA,CAIzB,OAAOH,EAAyC,QAC/CI,EAAA,KAAK,UAAU,IAAIJ,EAAK,KAAK,EAAE,IAA/B,MAAAI,EAAkC,OAAOJ,EAAI,CAG9C,IAAIG,EAAe,CACX,OAAA,KAAK,UAAU,IAAIA,CAAE,CAAA,CAG7B,IAAIA,EAAe,CACX,OAAA,KAAK,UAAU,IAAIA,CAAE,CAAA,CAG7B,QAAS,CACR,OAAO,MAAM,KAAK,KAAK,UAAU,QAAQ,CAAA,CAG1C,IAAI,MAAO,CACV,OAAO,KAAK,UAAU,IAAA,CAExB,CApDaE,EAAA,CAAXP,CAAA,EAFmBH,EAER,UAAA,YAAA,CAAA,EASZU,EAAA,CADCC,CAAA,EAVmBX,EAWpB,UAAA,MAAA,CAAA,EASAU,EAAA,CADCC,CAAA,EAnBmBX,EAoBpB,UAAA,SAAA,CAAA,EAKIU,EAAA,CADHE,CAAA,EAxBmBZ,EAyBhB,UAAA,MAAA,CAAA,EAKJU,EAAA,CADCC,CAAA,EA7BmBX,EA8BpB,UAAA,SAAA,CAAA,EAKAU,EAAA,CADCC,CAAA,EAlCmBX,EAmCpB,UAAA,SAAA,CAAA"}