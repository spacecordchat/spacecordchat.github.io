import{o as y,u as b,a as w,R as i,r as A,j as e,F as S,b as L,c as t,g as P,d as G,p as R,e as k,v as E,l as v}from"./DIBLJojdTQB51I2zM4gm.js";import{A as s}from"./CW2kfyzZtZzCoqj6tmGf.js";import{L as N}from"./MqH8SC2-2fiR4loE1ZE9.js";import{N as V}from"./D1UZb96-PtDrORJcROID.js";import{R as C}from"./D2BJlBGrMqXbymZvw0yN.js";import{E as F}from"./pERtTR2eK4H28OQXlESt.js";import{L as T}from"./BxmVlYfZm0QXbPJuCGVv.js";import{U as p}from"./DNLusOBklzQjspyhUAbk.js";import{u as I}from"./DMCex30FeWvvThtDj-pY.js";import{A as l}from"./B_h-14-vp-IIEm4R4zIk.js";import{L as O}from"./CL2CyIhQJOz5btmBBjjG.js";import{C as U}from"./DiePcwXV59jUErkq35iA.js";import{G as m}from"./BbvRrMjL3MsrffvEdAHV.js";import{b as c}from"./DU491TAIyusOX_9PGj17.js";import"./rzwbLBAcI-cUDwwmz6FT.js";import{u as W}from"./BV-6LX_Gn8Wz_usUCJsP.js";import{i as B}from"./moqeV2oR9_3sSpkx8aR1.js";function D(){const o=W(),n=I("App"),f=b(),r=w();return i.useEffect(()=>{const g=A(()=>o.token,a=>{a?(o.rest.setToken(a),o.gateway.readyState===WebSocket.CLOSED?(o.setGatewayReady(!1),o.gateway.connect(m.routeSettings.gateway)):n.debug("Gateway connect called but socket is not closed")):(n.debug("user no longer authenticated"),o.gateway.readyState===WebSocket.OPEN&&o.gateway.disconnect(1e3,"user is no longer authenticated"),f("/"))});return B&&(async()=>{const[a,u,d,h,x,j]=await Promise.all([P(),G(),R(),k(),E(),v()]);window.globals={tauriVersion:a,appVersion:u,platform:{name:d,arch:h,version:x,locale:j}}})(),m.load(),o.loadSettings(),n.debug("Loading complete"),o.setAppLoading(!1),g},[]),i.useEffect(()=>{r.online?c.remove("offline"):c.push({type:"offline"},"offline")},[r]),e.jsxs(F,{section:"app",children:[o.fpsShown&&e.jsx(S,{}),e.jsx(T,{children:e.jsxs(L,{children:[e.jsx(t,{index:!0,path:"/",element:e.jsx(s,{component:l})}),e.jsx(t,{path:"/app",element:e.jsx(s,{component:l})}),e.jsx(t,{path:"/channels/:guildId/:channelId?",element:e.jsx(s,{component:U})}),e.jsx(t,{path:"/login",element:e.jsx(p,{component:N})}),e.jsx(t,{path:"/register",element:e.jsx(p,{component:C})}),e.jsx(t,{path:"/logout",element:e.jsx(s,{component:O})}),e.jsx(t,{path:"*",element:e.jsx(V,{})})]})})]})}const re=y(D);export{re as A};
//# sourceMappingURL=VFO8j-alPk6GENjzR1pO.js.map
