{"version":3,"file":"CmtHS_iLm1jLtk9rwU9I.js","sources":["../../src/components/messaging/MessageBase.tsx"],"sourcesContent":["import dayjs from \"dayjs\";\nimport { observer } from \"mobx-react-lite\";\nimport styled from \"styled-components\";\nimport Message, { MessageLike } from \"../../stores/objects/Message\";\nimport { calendarStrings } from \"../../utils/i18n\";\nimport Floating from \"../floating/Floating\";\nimport FloatingTrigger from \"../floating/FloatingTrigger\";\n\ninterface Props {\n\theader?: boolean;\n\tmention?: boolean;\n}\n\nexport default styled.div<Props>`\n\tdisplay: flex;\n\toverflow: none;\n\tflex-direction: row;\n\t${(props) => !props.header && \"align-items: center;\"}\n\t${(props) => props.header && \"margin-top: 10px;\"}\n\t${(props) => props.mention && \"background-color: hsl(var(--warning-light-hsl)/0.1);\"}\n\tpadding-top: 0.2rem;\n\tpadding-bottom: 0.2rem;\n\n\t.message-details {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.message-details > .name {\n\t\tfont-weight: var(--font-weight-medium);\n\t}\n\n\t&:hover {\n\t\tbackground-color: ${(props) =>\n\t\t\tprops.mention ? \"hsl(var(--warning-light-hsl)/0.08);\" : \"var(--background-primary-highlight);\"};\n\n\t\ttime,\n\t\t.edited {\n\t\t\topacity: 1;\n\t\t}\n\t}\n`;\n\nexport const MessageInfo = styled.div`\n\twidth: 62px;\n\tdisplay: flex;\n\tflex-shrink: 0;\n\tpadding-top: 2px;\n\tflex-direction: row;\n\tjustify-content: center;\n\n\t.messageTimestampWrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\ttime,\n\t.edited {\n\t\topacity: 0;\n\t\tfont-size: 12px;\n\t\tcolor: var(--text-secondary);\n\t}\n`;\n\nexport const MessageContent = styled.div`\n\tposition: relative;\n\tmin-width: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tpadding-right: 48px;\n\tword-wrap: anywhere;\n`;\n\nexport const MessageContentText = styled.div<{ sending?: boolean; failed?: boolean }>`\n\t${(props) => props.sending && \"opacity: 0.5;\"}\n\t${(props) => props.failed && \"color: var(--error);\"}\n\tmargin: 2px 0;\n`;\n\nexport const DetailBase = styled.div`\n\tflex-shrink: 0;\n\tfont-size: 12px;\n\tdisplay: inline-flex;\n\tcolor: var(--text-secondary);\n\tpadding-left: 4px;\n\talign-self: center;\n\n\t.edited {\n\t\tcursor: default;\n\t\tuser-select: none;\n\t}\n`;\n\nexport const MessageDetails = observer(({ message, position }: { message: MessageLike; position: \"left\" | \"top\" }) => {\n\tif (position === \"left\") {\n\t\tif (message instanceof Message && message.edited_timestamp) {\n\t\t\treturn (\n\t\t\t\t<div className=\"messageTimestampWrapper\">\n\t\t\t\t\t<Floating\n\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\ttype=\"tooltip\"\n\t\t\t\t\t\tprops={{\n\t\t\t\t\t\t\tcontent: <span>{dayjs(message.timestamp).format(\"dddd, MMMM D, YYYY h:mm A\")}</span>,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t\t\t<time className=\"copyTime\" dateTime={message.edited_timestamp.toISOString()}>\n\t\t\t\t\t\t\t\t{dayjs(message.edited_timestamp).format(\"h:mm A\")}\n\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t</FloatingTrigger>\n\t\t\t\t\t</Floating>\n\t\t\t\t\t<span className=\"edited\">\n\t\t\t\t\t\t<Floating\n\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\ttype=\"tooltip\"\n\t\t\t\t\t\t\tprops={{\n\t\t\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t\t\t<span>{dayjs(message.edited_timestamp).format(\"dddd, MMMM D, YYYY h:mm A\")}</span>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t\t\t\t<span>(edited)</span>\n\t\t\t\t\t\t\t</FloatingTrigger>\n\t\t\t\t\t\t</Floating>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<time dateTime={message.timestamp.toISOString()}>{dayjs(message.timestamp).format(\"h:mm A\")}</time>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<DetailBase>\n\t\t\t<Floating\n\t\t\t\tplacement=\"top\"\n\t\t\t\ttype=\"tooltip\"\n\t\t\t\tprops={{\n\t\t\t\t\tcontent: <span>{dayjs(message.timestamp).format(\"dddd, MMMM D, YYYY h:mm A\")}</span>,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t<time className=\"copyTime\" dateTime={message.timestamp.toISOString()}>\n\t\t\t\t\t\t{dayjs(message.timestamp).calendar(undefined, calendarStrings)}\n\t\t\t\t\t</time>\n\t\t\t\t</FloatingTrigger>\n\t\t\t</Floating>\n\t\t\t{message instanceof Message && message.edited_timestamp && (\n\t\t\t\t<Floating\n\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\ttype=\"tooltip\"\n\t\t\t\t\tprops={{\n\t\t\t\t\t\tcontent: <span>{dayjs(message.edited_timestamp).format(\"dddd, MMMM D, YYYY h:mm A\")}</span>,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<FloatingTrigger>\n\t\t\t\t\t\t<span className=\"edited\">(edited)</span>\n\t\t\t\t\t</FloatingTrigger>\n\t\t\t\t</Floating>\n\t\t\t)}\n\t\t</DetailBase>\n\t);\n});\n"],"names":["styled","props","MessageInfo","MessageContent","MessageContentText","DetailBase","MessageDetails","observer","message","position","Message","jsxs","jsx","Floating","dayjs","FloatingTrigger","Fragment","calendarStrings"],"mappings":"sPAaA,MAAeA,EAAAA,EAAO;AAAA;AAAA;AAAA;AAAA,GAIlBC,GAAU,CAACA,EAAM,QAAU,sBAAsB;AAAA,GACjDA,GAAUA,EAAM,QAAU,mBAAmB;AAAA,GAC7CA,GAAUA,EAAM,SAAW,sDAAsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAe9DA,GACpBA,EAAM,QAAU,sCAAwC,sCAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASpFC,EAAcF,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBrBG,EAAiBH,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUxBI,EAAqBJ,EAAO;AAAA,GACrCC,GAAUA,EAAM,SAAW,eAAe;AAAA,GAC1CA,GAAUA,EAAM,QAAU,sBAAsB;AAAA;AAAA,EAIvCI,EAAaL,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcpBM,EAAiBC,EAAS,CAAC,CAAE,QAAAC,EAAS,SAAAC,KAC9CA,IAAa,OACZD,aAAmBE,GAAWF,EAAQ,iBAExCG,EAAA,KAAC,MAAI,CAAA,UAAU,0BACd,SAAA,CAAAC,EAAA,IAACC,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,cAAU,OAAM,CAAA,SAAAC,EAAMN,EAAQ,SAAS,EAAE,OAAO,2BAA2B,CAAE,CAAA,CAC9E,EAEA,eAACO,EACA,CAAA,SAAAH,MAAC,QAAK,UAAU,WAAW,SAAUJ,EAAQ,iBAAiB,YAAY,EACxE,WAAMA,EAAQ,gBAAgB,EAAE,OAAO,QAAQ,EACjD,CACD,CAAA,CAAA,CACD,EACAI,EAAAA,IAAC,OAAK,CAAA,UAAU,SACf,SAAAA,EAAA,IAACC,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,cACE,OAAM,CAAA,SAAAC,EAAMN,EAAQ,gBAAgB,EAAE,OAAO,2BAA2B,CAAE,CAAA,CAE7E,EAEA,SAACI,EAAAA,IAAAG,EAAA,CACA,SAACH,MAAA,OAAA,CAAK,oBAAQ,CACf,CAAA,CAAA,CAAA,CAEF,CAAA,CAAA,EACD,EAKAA,EAAA,IAAAI,EAAA,SAAA,CAAA,SAAAJ,EAAA,IAAC,OAAK,CAAA,SAAUJ,EAAQ,UAAU,YAAA,EAAgB,SAAAM,EAAMN,EAAQ,SAAS,EAAE,OAAO,QAAQ,CAAE,CAAA,EAC7F,SAKAH,EACA,CAAA,SAAA,CAAAO,EAAA,IAACC,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,cAAU,OAAM,CAAA,SAAAC,EAAMN,EAAQ,SAAS,EAAE,OAAO,2BAA2B,CAAE,CAAA,CAC9E,EAEA,eAACO,EACA,CAAA,SAAAH,EAAAA,IAAC,QAAK,UAAU,WAAW,SAAUJ,EAAQ,UAAU,cACrD,SAAAM,EAAMN,EAAQ,SAAS,EAAE,SAAS,OAAWS,CAAe,CAC9D,CAAA,CACD,CAAA,CAAA,CACD,EACCT,aAAmBE,GAAWF,EAAQ,kBACtCI,EAAA,IAACC,EAAA,CACA,UAAU,MACV,KAAK,UACL,MAAO,CACN,cAAU,OAAM,CAAA,SAAAC,EAAMN,EAAQ,gBAAgB,EAAE,OAAO,2BAA2B,CAAE,CAAA,CACrF,EAEA,eAACO,EACA,CAAA,SAAAH,EAAA,IAAC,QAAK,UAAU,SAAS,mBAAQ,CAAA,CAClC,CAAA,CAAA,CAAA,CACD,EAEF,CAED"}