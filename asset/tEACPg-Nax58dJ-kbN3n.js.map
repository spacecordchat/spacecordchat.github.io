{"version":3,"file":"tEACPg-Nax58dJ-kbN3n.js","sources":["../../src/components/modals/LeaveServerModal.tsx"],"sourcesContent":["import { Routes } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ModalProps, modalController } from \"../../controllers/modals\";\nimport { useAppStore } from \"../../hooks/useAppStore\";\nimport useLogger from \"../../hooks/useLogger\";\nimport { Modal } from \"./ModalComponents\";\n\nexport function LeaveServerModal({ target, ...props }: ModalProps<\"leave_server\">) {\n\tconst app = useAppStore();\n\tconst logger = useLogger(\"LeaveServerModal\");\n\tconst navigate = useNavigate();\n\tconst [isDisabled, setDisabled] = useState(false);\n\n\tasync function leaveGuild() {\n\t\tsetDisabled(true);\n\t\tawait app.rest\n\t\t\t.delete(Routes.userGuild(target.id))\n\t\t\t.then(() => {\n\t\t\t\tnavigate(\"/channels/@me\");\n\t\t\t\tmodalController.pop(\"close\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tlogger.error(e);\n\t\t\t\tmodalController.pop(\"close\");\n\t\t\t\tmodalController.push({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\terror: e,\n\t\t\t\t\ttitle: \"Failed to leave server\",\n\t\t\t\t\tdescription: \"An error occurred while trying to leave the server.\",\n\t\t\t\t});\n\t\t\t})\n\t\t\t.finally(() => setDisabled(false));\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\t{...props}\n\t\t\ttitle={`Leave '${target.name}'`}\n\t\t\tdescription={\n\t\t\t\t<span>\n\t\t\t\t\tAre you sure you want to leave <b>{target.name}</b>? You won't be able to rejoin this guild unless\n\t\t\t\t\tyou are re-invited.\n\t\t\t\t</span>\n\t\t\t}\n\t\t\tactions={[\n\t\t\t\t{\n\t\t\t\t\tonClick: leaveGuild,\n\t\t\t\t\tchildren: <span>Leave Server</span>,\n\t\t\t\t\tpalette: \"danger\",\n\t\t\t\t\tconfirmation: true,\n\t\t\t\t\tdisabled: isDisabled,\n\t\t\t\t\tsize: \"small\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tonClick: () => modalController.pop(\"close\"),\n\t\t\t\t\tchildren: <span>Cancel</span>,\n\t\t\t\t\tpalette: \"link\",\n\t\t\t\t\tdisabled: isDisabled,\n\t\t\t\t\tsize: \"small\",\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n}\n"],"names":["LeaveServerModal","target","props","app","useAppStore","logger","useLogger","navigate","useNavigate","isDisabled","setDisabled","useState","leaveGuild","Routes","modalController","e","jsx","Modal"],"mappings":"8RAQO,SAASA,EAAiB,CAAE,OAAAC,EAAQ,GAAGC,GAAqC,CAClF,MAAMC,EAAMC,EAAY,EAClBC,EAASC,EAAU,kBAAkB,EACrCC,EAAWC,EAAY,EACvB,CAACC,EAAYC,CAAW,EAAIC,EAAAA,SAAS,EAAK,EAEhD,eAAeC,GAAa,CAC3BF,EAAY,EAAI,EACV,MAAAP,EAAI,KACR,OAAOU,EAAO,UAAUZ,EAAO,EAAE,CAAC,EAClC,KAAK,IAAM,CACXM,EAAS,eAAe,EACxBO,EAAgB,IAAI,OAAO,CAAA,CAC3B,EACA,MAAOC,GAAM,CACbV,EAAO,MAAMU,CAAC,EACdD,EAAgB,IAAI,OAAO,EAC3BA,EAAgB,KAAK,CACpB,KAAM,QACN,MAAOC,EACP,MAAO,yBACP,YAAa,qDAAA,CACb,CACD,CAAA,EACA,QAAQ,IAAML,EAAY,EAAK,CAAC,CAAA,CAIlC,OAAAM,EAAA,IAACC,EAAA,CACC,GAAGf,EACJ,MAAO,UAAUD,EAAO,IAAI,IAC5B,mBACE,OAAK,CAAA,SAAA,CAAA,kCAC0Be,EAAAA,IAAC,IAAG,CAAA,SAAAf,EAAO,IAAK,CAAA,EAAI,qEAAA,EAEpD,EAED,QAAS,CACR,CACC,QAASW,EACT,SAAWI,EAAAA,IAAA,OAAA,CAAK,SAAY,cAAA,CAAA,EAC5B,QAAS,SACT,aAAc,GACd,SAAUP,EACV,KAAM,OACP,EACA,CACC,QAAS,IAAMK,EAAgB,IAAI,OAAO,EAC1C,SAAWE,EAAAA,IAAA,OAAA,CAAK,SAAM,QAAA,CAAA,EACtB,QAAS,OACT,SAAUP,EACV,KAAM,OAAA,CACP,CACD,CACD,CAEF"}